var V=Object.defineProperty;var Z=(e,t,o)=>t in e?V(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var P=(e,t,o)=>(Z(e,typeof t!="symbol"?t+"":t,o),o);const G=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const a of l)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function o(l){const a={};return l.integrity&&(a.integrity=l.integrity),l.referrerpolicy&&(a.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?a.credentials="include":l.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(l){if(l.ep)return;l.ep=!0;const a=o(l);fetch(l.href,a)}};G();class x{constructor(t,o){P(this,"coord","");this.x=t,this.y=o,this.coord=`(${this.x},${this.y})`}update(){this.coord=`(${this.x},${this.y})`}}const g=12,K=[1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6,6.5,7,7.5,8,8.5,9,9.5,10];let b=100,n=3,s=new x(0,0),C=!1,h=0,E=!1;function T(){var o;y(5,!1);const e=document.getElementById("puzzle");e.innerHTML="",n=Number(document.getElementsByTagName("select")[0].value),h=parseFloat(getComputedStyle(e).width)/n,e.style.padding=`${g*K[n-3]}px`;let t=Date.now().toString();for(let i=0;i<n;i++)for(let l=0;l<n;l++){let a=document.createElement("div");a.classList.add("tile"),a.classList.add("empty"),a.setAttribute("data-x",`${l}`),a.setAttribute("data-y",`${i}`),a.style.top=`${i*(h+g)}px`,a.style.left=`${l*(h+g)}px`,a.style.width=`${h}px`,a.style.height=`${h}px`,a.id=t,e.appendChild(a);const r=document.createElement("div");r.classList.add("tile"),r.setAttribute("data-x",`${l}`),r.setAttribute("data-y",`${i}`),r.setAttribute("data-value",`${i*n+l+1}`),r.style.top=`${i*(h+g)}px`,r.style.left=`${l*(h+g)}px`,r.style.width=`${h}px`,r.style.height=`${h}px`,r.innerText=(i*n+l+1).toString(),r.id=t,e.appendChild(r)}(o=e.lastChild)==null||o.remove(),s.x=n-1,s.y=n-1,u=[];for(let i=0;i<n;i++){let l=[];for(let a=0;a<n;a++)l.push(!1);u.push(l)}}function d(e,t=!0){var i,l;if(C)return!1;let o=null;switch(e){case"up":o=J();break;case"right":o=Q();break;case"down":o=ee();break;case"left":o=te();break}if(o===null)return!1;if(o.style.left=`${Number(o.dataset.x)*(h+g)}px`,o.style.top=`${Number(o.dataset.y)*(h+g)}px`,s.update(),E===!0)for(let a=0;a<n;a++)for(let r=0;r<n;r++)u[a][r]===!0?(i=document.querySelector(`.empty[data-x="${a}"][data-y="${r}"]`))==null||i.classList.add("show-valid"):(l=document.querySelector(`.empty[data-x="${a}"][data-y="${r}"]`))==null||l.classList.remove("show-valid");return t===!0?(C=!0,o.style.transition=`${b/1e3}s`,new Promise(a=>{window.setTimeout(()=>{C=!1,v()&&(y(4,!1),y(3,!1),y(5,!0),console.log("YOU WIN!")),a(!0)},b)})):!0}function J(){if(s.y+1>=n)return null;const e=document.querySelector(`.tile:not(.empty)[data-x="${s.x}"][data-y="${s.y+1}"]`);return e==null||e.setAttribute("data-x",`${s.x}`),e==null||e.setAttribute("data-y",`${s.y}`),s.y+=1,e}function Q(){if(s.x-1<0)return null;const e=document.querySelector(`.tile:not(.empty)[data-x="${s.x-1}"][data-y="${s.y}"]`);return e==null||e.setAttribute("data-x",`${s.x}`),e==null||e.setAttribute("data-y",`${s.y}`),s.x-=1,e}function ee(){if(s.y+1<0)return null;const e=document.querySelector(`.tile:not(.empty)[data-x="${s.x}"][data-y="${s.y-1}"]`);return e==null||e.setAttribute("data-x",`${s.x}`),e==null||e.setAttribute("data-y",`${s.y}`),s.y-=1,e}function te(){if(s.x+1>=n)return null;const e=document.querySelector(`.tile:not(.empty)[data-x="${s.x+1}"][data-y="${s.y}"]`);return e==null||e.setAttribute("data-x",`${s.x}`),e==null||e.setAttribute("data-y",`${s.y}`),s.x+=1,e}function oe(){let e=[];return s.y+1<n&&e.push("up"),s.x-1>=0&&e.push("right"),s.y-1>=0&&e.push("down"),s.x+1<n&&e.push("left"),e}function U(){const e=Math.pow(8*n,1.5);let t="down";for(let o=0;o<e;o++){const i=oe();let l=0,a=ie(i),r=a[l];for(;r===ne(t);)l++,r=a[l];t=r,d(r,!1)}}function ne(e){switch(e){case"up":return"down";case"right":return"left";case"down":return"up";case"left":return"right"}}function ie(e){let t=e.length,o;for(;t!=0;)o=Math.floor(Math.random()*t),t--,[e[t],e[o]]=[e[o],e[t]];return e}async function q(e,t){e.x-t.x===-1?await d("left"):e.x-t.x===1?await d("right"):e.y-t.y===-1?await d("up"):await d("down")}async function M(e){if(y(5,!1),e===n){u=[];for(let t=0;t<n;t++){let o=[];for(let i=0;i<n;i++)o.push(!1);u.push(o)}}y(1,!0),await le(e),y(1,!1),y(2,!0),await ae(e),y(2,!1),e>3?(y(3,!0),await M(e-1)):(y(1,!1),y(4,!0),se())}async function le(e){let t=n-e,o=t*n+t+1;for(let i=0;i<e-2;i++)await c(o+i,t+i,t),u[t+i][t]=!0;await c(o+e-2,n-1,t),$(o+e-1).x===n-2?(await c(o+e-1,n-1,t+2),await c(o+e-2,n-1,t+1),await c(o+e-2,n-1,t)):(u[n-1][t]=!0,u[n-2][t]=!0),await c(o+e-1,n-1,t+1),u[n-2][t]=!1,u[t+e-1][t+1]=!0,await c(o+e-2,n-2,t),await c(o+e-1,n-1,t),u[n-2][t]=!0,u[n-1][t]=!0}async function ae(e){let t=n-e,o=t*n+t+1;for(let i=1;i<e-2;i++)await c(o+i*n,t,t+i),u[t][t+i]=!0;await c(o+(e-2)*n,t,t+e-1),$(o+(e-1)*n).y===n-2?(await c(o+(e-1)*n,t+2,n-1),await c(o+(e-2)*n,t+1,n-1),await c(o+(e-2)*n,t,n-1)):(u[t][t+e-1]=!0,u[t][t+e-2]=!0),await c(o+(e-1)*n,t+1,t+e-1),u[t][t+e-2]=!1,u[t+1][t+e-1]=!0,await c(o+(e-2)*n,t,t+e-2),await c(o+(e-1)*n,t,t+e-1),u[t][t+e-2]=!0}async function se(){for(let e=0;e<4;e++)if(await d("up"),v()||(await d("left"),v())||(await d("down"),v())||(await d("right"),v()))return!0;return!1}async function c(e,t,o){let i=$(e),l=S(i,new x(t,o));if(l==null)return!1;for(let a=0;a<l.length;a++){let r=l[a];u[i.x][i.y]=!0;let f=S(s,r);if(f==null)return!1;for(let m=0;m<f.length;m++)await q(s,f[m]),s=f[m];await q(s,i),u[i.x][i.y]=!1,i=r}return!0}function $(e){let t=Array.from(document.getElementsByClassName("tile")).find(i=>i.textContent==e.toString());return new x(Number(t.dataset.x),Number(t.dataset.y))}function v(){let e=0;for(let t=0;t<n;t++)for(let o=0;o<n&&e!=n*n-1;o++){const i=document.querySelector(`.tile:not(.empty)[data-x="${o}"][data-y="${t}"]`);if(i==null)continue;if(Number(i.textContent)!==t*n+o+1)return!1;e++}return!0}let u=[];function S(e,t){let o=[e],i={},l={};i[e.coord]=0,l[e.coord]=0;let a={},r=0;for(;o.length>0&&r<5;){let f=o.pop();if(f.coord==t.coord){let p=[];for(;f.coord!==e.coord;)p.push(f),f=a[f.coord];return p.reverse(),p}let m=ue(f);for(let p=0;p<m.length;p++){let w=m[p],N=i[f.coord]+1;if(i[w.coord]===void 0||N<i[w.coord]){let F=re(w,t,e);i[w.coord]=N,l[w.coord]=N+F,a[w.coord]=f,o.push(w)}}o.sort((p,w)=>l[w.coord]-l[p.coord])}return null}function re(e,t,o){let i=Math.abs(e.x-t.x)+Math.abs(e.y-t.y),l=e.x-t.x,a=e.y-t.y,r=o.x-t.x,f=o.y-t.y,m=Math.abs(l*f-r*a);return i+m*.001}function ue(e){let t=[];return e.x+1<n&&u[e.x+1][e.y]===!1&&t.push(new x(e.x+1,e.y)),e.x-1>=0&&u[e.x-1][e.y]===!1&&t.push(new x(e.x-1,e.y)),e.y-1>=0&&u[e.x][e.y-1]===!1&&t.push(new x(e.x,e.y-1)),e.y+1<n&&u[e.x][e.y+1]===!1&&t.push(new x(e.x,e.y+1)),t}function y(e,t){t===!0?document.getElementById(`light-${e}`).classList.add("on"):document.getElementById(`light-${e}`).classList.remove("on")}async function ce(){window.scrollTo({top:0,behavior:"smooth"}),u=[];for(let o=0;o<n;o++){let i=[];for(let l=0;l<n;l++)i.push(!1);u.push(i)}const e=o=>new Promise(i=>{setTimeout(i,o)});let t=S($(8),new x(0,0));t.splice(0,0,$(8));for(let o=0;o<t.length;o++)document.querySelector(`.empty[data-x="${t[o].x}"][data-y="${t[o].y}"]`).classList.add("path-showcase"),await e(500)}async function de(){window.scrollTo({top:0,behavior:"smooth"});let e=S($(8),new x(0,0));e.splice(0,0,$(8)),b=500,await c(8,0,0),b=100;for(let t=0;t<e.length;t++)document.querySelector(`.empty[data-x="${e[t].x}"][data-y="${e[t].y}"]`).classList.remove("path-showcase")}let L=0,B=0,I=0,k=0,W=document.getElementById("puzzle");W.addEventListener("touchstart",function(e){L=e.touches[0].clientX,B=e.touches[0].clientY,e.preventDefault(),e.stopPropagation()},!1);W.addEventListener("touchend",function(e){A&&window.innerWidth<896&&(e.preventDefault(),e.stopPropagation()),I=e.changedTouches[0].clientX,k=e.changedTouches[0].clientY,fe()},!1);function fe(){let e=Math.abs(I-L)>Math.abs(k-B);e&&I<L?d("left"):e&&I>L?d("right"):k<B?d("up"):k>B&&d("down")}var z;(z=document.getElementById("speed"))==null||z.addEventListener("input",e=>{let t=100-Number(e.target.value);b=t*9+100,document.getElementById("speed-value").innerText=`${100-t}%`});var D;(D=document.getElementById("reset"))==null||D.addEventListener("click",T);var O;(O=document.getElementById("shuffle"))==null||O.addEventListener("click",U);var j;(j=document.getElementById("solve"))==null||j.addEventListener("click",()=>M(n));document.addEventListener("keyup",e=>{e.key==="ArrowUp"&&d("up"),e.key==="ArrowRight"&&d("right"),e.key==="ArrowDown"&&d("down"),e.key==="ArrowLeft"&&d("left")});var H;(H=document.getElementById("selector"))==null||H.addEventListener("change",T);let A=!1;var R;(R=document.getElementById("collapser"))==null||R.addEventListener("click",()=>{A=!A,document.body.classList.toggle("open");let e=document.getElementById("more");if(window.innerWidth>896){e.style.animation="none",e.offsetHeight,e.style.animation="";let t=document.getElementById("collapse-arrow");t.style.animation="none",t.offsetHeight,t.style.animation=""}else window.setTimeout(()=>{A?document.body.style.position="relative":document.body.style.position="fixed",window.scrollTo({top:window.innerHeight,behavior:"smooth"})},250)});var Y;(Y=document.getElementById("move-1"))==null||Y.addEventListener("click",ce);var X;(X=document.getElementById("move-2"))==null||X.addEventListener("click",de);var _;(_=document.getElementById("show-3"))==null||_.addEventListener("click",()=>{E===!0?(E=!1,document.getElementById("show-3").innerText="Show",Array.from(document.getElementsByClassName("empty")).forEach(e=>{e.classList.remove("show-valid")})):(window.scrollTo({top:0,behavior:"smooth"}),E=!0,document.getElementById("show-3").innerText="Hide",T(),U(),M(n))});T();
