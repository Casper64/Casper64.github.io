!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var o=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.equals=function(t){return t.x==this.x&&t.y==this.y},t.prototype.matches=function(t,e){return t==this.x&&e==this.y},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.add=function(t){this.x+=t.x,this.y+=t.y},t.zero=function(){return new t(0,0)},t.random=function(){return new t(Math.floor(4*Math.random()),Math.floor(4*Math.random()))},t.add=function(e,n){return new t(e.x+n.x,e.y+n.y)},t}(),r=[0,112,224,336],i=[-12,70,151,232],s=function(){function t(t,e){this.id=Math.random(),this.position=new o(t,e),this.value=Math.random()>=.9?2:1,this.positions=window.innerWidth>600?r:i}return Object.defineProperty(t.prototype,"x",{get:function(){return this.position.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.position.y},enumerable:!1,configurable:!0}),t.prototype.draw=function(){var t=document.getElementById("root"),e=document.createElement("div");return e.classList.add("tile"),e.classList.add("tile-"+this.value),e.innerText=Math.pow(2,this.value).toString(),e.style.left=this.positions[this.position.x]+"px",e.style.top=this.positions[this.position.y]+"px",t.insertAdjacentElement("beforeend",e),this.element=e,this},t.prototype.update=function(t){var e=this;void 0===t&&(t=!1);return this.element.style.left=this.positions[this.position.x]+"px",this.element.style.top=this.positions[this.position.y]+"px",setTimeout((function(){e.element.className="tile tile-"+e.value,e.element.innerText=Math.pow(2,e.value).toString(),t&&e.remove()}),100),this},t.prototype.remove=function(){this.element.remove()},t.from=function(e){return new t(e.x,e.y)},t}();function a(t,e){var n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];if(e==f.Up)for(var o=0;o<4;o++){for(var r=[],i=0;i<4;i++)r.push(t[o+4*i]);r=u(r);for(i=0;i<4;i++)n[o+4*i]=r[i]}else if(e==f.Left)for(o=0;o<4;o++){for(r=[],i=0;i<4;i++)r.push(t[4*o+i]);r=u(r);for(i=0;i<4;i++)n[4*o+i]=r[i]}else if(e==f.Down)for(o=0;o<4;o++){for(r=[],i=0;i<4;i++)r.push(t[o+4*(3-i)]);r=u(r);for(i=0;i<4;i++)n[o+4*(3-i)]=r[i]}else if(e==f.Right)for(o=0;o<4;o++){for(r=[],i=0;i<4;i++)r.push(t[4*o+(3-i)]);r=u(r);for(i=0;i<4;i++)n[4*o+(3-i)]=r[i]}return n}function u(t){var e=-1,n=0,o=[0,0,0,0];return t.forEach((function(t){0!=t&&(1==e?(e=t,o[n]=t,n++):e==t?(o[n-1]=2*e,e=-1):(e=t,o[n]=t,n++))})),o}var f,p=function(){function t(){this.currentGrid=[],this.maxStep=3,this.best_move=0,this.nodes=0}return t.prototype.run=function(){var t=l.get().getOneDGrid();this.currentGrid=t.map((function(t){return t})),this.startSearch(),c(this.bestMove)},t.prototype.startSearch=function(){this.nodes=0,this.maxStep=3;for(var t=[];;){this.nodes=0;var e=performance.now();if(this.search(this.currentGrid,0),t.push(performance.now()-e),this.nodes>=1e4||this.maxStep>=8)break;this.maxStep+=1}},t.prototype.search=function(t,e){if(this.nodes++,e==this.maxStep)return this.estimate(t);var n=-1;for(var o in f)if(!isNaN(Number(o))){var r=a(t,Number(o)),i=r.reduce((function(t,e){return t+e}));if(!1===r.every((function(e,n){return e==t[n]}))){for(var s=0,u=0,p=0;p<16;++p)0===r[p]&&(r[p]=2,++u,s+=.9*this.search(r,e+1),r[p]=4,s+=.1*this.search(r,e+1),r[p]=0);0!=u?s/=u:s=-1e20,i+s>n&&(n=i+s,0==e&&(this.bestMove=Number(o)))}}return n},t.prototype.estimate=function(t){for(var e=0,n=0,o=0;o<16;o++)0==t[o]&&0,e+=t[o],o%4!=3&&(n+=Math.abs(t[o]-t[o+1])),o<12&&(n+=Math.abs(t[o]-t[o+4]));return 2*(4*e-n)},t}(),l=function(){function t(){this.ai=new p,this.stop=!1,this.fast=!1,this.score=0,this.board=[[null,null,null,null],[null,null,null,null],[null,null,null,null],[null,null,null,null]],this.prevTime=0}return t.get=function(){return t.instance||(t.instance=new t),t.instance},t.newGame=function(){for(var t=this.instance,e=0;e<4;e++)for(var n=0;n<4;n++){var r=t.board[e][n];r&&(t.board[e][n]=null,r.remove())}for(var i=o.random(),a=o.random();i.equals(a);)a=o.random();var u=s.from(i).draw(),f=s.from(a).draw();t.board[u.x][u.y]=u,t.board[f.x][f.y]=f},t.prototype.boardCopy=function(){for(var t=[],e=0;e<4;e++){var n=this.board[e].map((function(t){return t}));t.push(n)}return t},t.prototype.logBoard=function(t){for(var e=t||this.board,n="",o=0;o<4;o++){for(var r=[],i=0;i<4;i++){var s=e[i][o];s?r.push(Math.pow(2,s.value)):r.push(0)}n+=r.join("\t"),n+="\n"}console.log(n)},Object.defineProperty(t.prototype,"tiles",{get:function(){for(var t=[],e=0;e<4;e++)for(var n=0;n<4;n++){var o=this.board[e][n];o&&t.push(o)}return t},enumerable:!1,configurable:!0}),t.prototype.nextMove=function(t){void 0===t&&(t=100);for(var e=o.random();this.tiles.some((function(t){return t.position.equals(e)}));)e=o.random();var n=s.from(e).draw();this.board[n.x][n.y]=n},t.prototype.getOneDGrid=function(){for(var t=[],e=0;e<4;e++)for(var n=0;n<4;n++){var o=this.board[n][e];o?t.push(Math.pow(2,o.value)):t.push(0)}return t},t.prototype.startAI=function(){var t=this,e=performance.now();this.ai.run();var n=performance.now();if(this.stop)this.stop=!1;else{document.getElementById("score").innerText="Score: "+this.score;var o=100-(n-e);this.fast?requestAnimationFrame((function(){t.startAI()})):setTimeout((function(){t.stop?t.stop=!1:t.startAI()}),o<0?0:o)}},t}();function c(t){var e,n,r,i=l.get(),s=i.boardCopy(),a=i.tiles;t==f.Up?(e=new o(0,0),n=new o(0,-1),r=!0):t==f.Down?(e=new o(0,3),n=new o(0,1),r=!0):t==f.Left?(e=new o(0,0),n=new o(-1,0),r=!1):(e=new o(3,0),n=new o(1,0),r=!1);for(var u=[],p=0;p<4;p++){for(var c=0;c<4;c++){var h=e.clone();r?h.x+=c:h.y+=c,u.push(h)}e.x-=n.x,e.y-=n.y}for(var d=!1,v=0;v<u.length;v++){var y=function(t){var e=a[t];if(e.position.equals(u[v])){var r=e.position.clone();s[e.x][e.y]=null;var f,p=o.add(e.position,n),l=0;if(p.x<0||p.x>3||p.y<0||p.y>3)p=e.position.clone();else for(l=(f=s[p.x][p.y])?f.value:0;0==l;){if(e.position=p.clone(),(p=o.add(e.position,n)).x<0||p.x>3||p.y<0||p.y>3){p=e.position.clone();break}l=(f=s[p.x][p.y])?f.value:0}if(l==e.value)return(f=a[a.findIndex((function(t){return t.position.equals(p)&&t.id!=e.id}))]).value+=1,i.score+=Math.pow(2,f.value),e.position=p,s[f.x][f.y]=f,e.update(!0),a.splice(t,1),e.position.equals(r)||(d=!0),"continue";s[e.x][e.y]=e,e.position.equals(r)||(d=!0)}};for(p=0;p<a.length;p++)y(p)}a.forEach((function(t){t.update()})),d?(i.board=s,i.nextMove()):i.stop=!0}function h(){document.getElementById("root");for(var t=o.random(),e=o.random();t.equals(e);)e=o.random();var n=s.from(t).draw(),r=s.from(e).draw(),i=l.get();i.board[n.x][n.y]=n,i.board[r.x][r.y]=r,window.addEventListener("keyup",(function(t){38==t.which?c(f.Up):40==t.which?c(f.Down):37==t.which?c(f.Left):39==t.which&&c(f.Right),document.getElementById("score").innerText="Score: "+l.get().score}))}!function(t){t[t.Up=1]="Up",t[t.Down=2]="Down",t[t.Left=3]="Left",t[t.Right=4]="Right"}(f||(f={})),window.Game=l,h()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWwudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RpbGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dyaWQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FpLnRzIiwid2VicGFjazovLy8uL3NyYy9tb3ZlLnRzIiwid2VicGFjazovLy8uL3NyYy9nYW1lLnRzIiwid2VicGFjazovLy8uL3NyYy9zZXR1cC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJ4IiwieSIsInRoaXMiLCJlcXVhbHMiLCJiIiwibWF0Y2hlcyIsImNsb25lIiwiVmVjMiIsImFkZCIsInplcm8iLCJyYW5kb20iLCJNYXRoIiwiZmxvb3IiLCJhIiwicG9zaXRpb25zIiwicG9zaXRpb25zUGhvbmUiLCJpZCIsInBvc2l0aW9uIiwid2luZG93IiwiaW5uZXJXaWR0aCIsImRyYXciLCJyb290IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImVsZW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiaW5uZXJUZXh0IiwicG93IiwidG9TdHJpbmciLCJzdHlsZSIsImxlZnQiLCJ0b3AiLCJpbnNlcnRBZGphY2VudEVsZW1lbnQiLCJ1cGRhdGUiLCJyZW1vdmUiLCJzZXRUaW1lb3V0IiwiY2xhc3NOYW1lIiwiZnJvbSIsIlRpbGUiLCJnZXROZXh0R3JpZCIsImdyaWQiLCJtb3ZlIiwidGVtcCIsIkRpcmVjdGlvbiIsIlVwIiwicm93IiwiaiIsInB1c2giLCJzd2lwZVJvdyIsIkxlZnQiLCJEb3duIiwiUmlnaHQiLCJwcmV2IiwiZm9yRWFjaCIsInZhbCIsImN1cnJlbnRHcmlkIiwibWF4U3RlcCIsImJlc3RfbW92ZSIsIm5vZGVzIiwicnVuIiwidGVtcEdyaWQiLCJnZXRPbmVER3JpZCIsIm1hcCIsInN0YXJ0U2VhcmNoIiwiYmVzdE1vdmUiLCJ0MSIsInBlcmZvcm1hbmNlIiwibm93Iiwic2VhcmNoIiwic3RlcCIsImVzdGltYXRlIiwiYmVzdFNjb3JlIiwiZGlyIiwiaXNOYU4iLCJOdW1iZXIiLCJuZXdHcmlkIiwic2NvcmUiLCJyZWR1Y2UiLCJhY2MiLCJjdXJyZW50IiwiZXZlcnkiLCJpbmRleCIsImVtcHR5Q2VsbHMiLCJzdW0iLCJwZW5hbHR5IiwiemVyb3MiLCJhYnMiLCJhaSIsInN0b3AiLCJmYXN0IiwiYm9hcmQiLCJwcmV2VGltZSIsIkdhbWUiLCJpbnN0YW5jZSIsIm5ld0dhbWUiLCJnYW1lIiwidGlsZSIsInJhbmRvbTEiLCJyYW5kb20yIiwidGlsZTEiLCJ0aWxlMiIsImJvYXJkQ29weSIsImFyciIsImluc2lkZSIsImxvZ0JvYXJkIiwiYm9hcmRTdHJpbmciLCJzdHJpbmciLCJqb2luIiwiY29uc29sZSIsImxvZyIsImxpc3QiLCJuZXh0TW92ZSIsInRpbWUiLCJwb3MiLCJ0aWxlcyIsInNvbWUiLCJzdGFydEFJIiwidDAiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJkaXJlY3Rpb24iLCJzdiIsIm1kIiwidmVydGljYWwiLCJzbyIsIm1vdmVkIiwibGVuZ3RoIiwibmV4dCIsIm5leHRWYWx1ZSIsImZpbmRJbmRleCIsInNwbGljZSIsInNldHVwIiwiYWRkRXZlbnRMaXN0ZW5lciIs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QUN0QndFLEdBQVEsS0FuRHBCLElBQVM3SixFQUFJLEVBQUdBLEVBQUltSixFQUFNVyxPQUFROUosSSxFQUF6QkEsR0F3RGJtSixFQUFNN0QsU0FBUSxTQUFBMkMsR0FDVkEsRUFBSy9ELFlBR0wyRixHQUNBN0IsRUFBS0wsTUFBUUEsRUFDYkssRUFBS2dCLFlBR0xoQixFQUFLUCxNQUFPLEVFbEpiLFNBQVMwQyxJQUNjN0csU0FBU0MsZUFBZSxRQUlsRCxJQUpBLElBQ0kyRSxFQUFVM0YsRUFBS0csU0FDZnlGLEVBQVU1RixFQUFLRyxTQUVid0YsRUFBUS9GLE9BQU9nRyxJQUNqQkEsRUFBVTVGLEVBQUtHLFNBR25CLElBQUkwRixFQUFRLEVBQUs5RCxLQUFLNEQsR0FBUzlFLE9BQzNCaUYsRUFBUSxFQUFLL0QsS0FBSzZELEdBQVMvRSxPQU16QjRFLEVBQU8sRUFBS25ILE1BQ2xCbUgsRUFBS0wsTUFBTVMsRUFBTXBHLEdBQUdvRyxFQUFNbkcsR0FBS21HLEVBQy9CSixFQUFLTCxNQUFNVSxFQUFNckcsR0FBR3FHLEVBQU1wRyxHQUFLb0csRUZaL0JuRixPQUFPa0gsaUJBQWlCLFNBQVMsU0FBQUMsR0FFVixJQUFmQSxFQUFNQyxNQUNOLEVBQUsxRixFQUFVQyxJQUlLLElBQWZ3RixFQUFNQyxNQUNYLEVBQUsxRixFQUFVTyxNQUlLLElBQWZrRixFQUFNQyxNQUNYLEVBQUsxRixFQUFVTSxNQUlLLElBQWZtRixFQUFNQyxPQUNYLEVBQUsxRixFQUFVUSxPQUVuQjlCLFNBQVNDLGVBQWUsU0FBVUksVUFBWSxVQUFVLEVBQUs5QyxNQUFNZ0csVUE1QjNFLFNBQVlqQyxHQUNSLGVBQ0EsbUJBQ0EsbUJBQ0EscUJBSkosQ0FBWUEsTUFBUyxLR0NyQjFCLE9BQU8yRSxLQUFPLEVBSVZzQyIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCIvKiAyRCBWZWN0b3Igc2VsZiBleHBsYW5hdG9yeSAqL1xyXG5cclxuZXhwb3J0IGNsYXNzIFZlYzIge1xyXG4gICAgcHVibGljIHg6IG51bWJlcjtcclxuICAgIHB1YmxpYyB5OiBudW1iZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IoeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnggPSB4O1xyXG4gICAgICAgIHRoaXMueSA9IHk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGVxdWFscyhiOiBWZWMyKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIGIueCA9PSB0aGlzLnggJiYgYi55ID09IHRoaXMueTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgbWF0Y2hlcyh4OiBudW1iZXIsIHk6IG51bWJlcik6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB4ID09IHRoaXMueCAmJiB5ID09IHRoaXMueTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBjbG9uZSgpOiBWZWMyIHtcclxuICAgICAgICByZXR1cm4gbmV3IFZlYzIodGhpcy54LCB0aGlzLnkpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFkZChiOiBWZWMyKSB7XHJcbiAgICAgICAgdGhpcy54ICs9IGIueDtcclxuICAgICAgICB0aGlzLnkgKz0gYi55O1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyB6ZXJvICgpOiBWZWMyIHtcclxuICAgICAgICByZXR1cm4gbmV3IFZlYzIoMCwgMCk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgcmFuZG9tKCk6IFZlYzIge1xyXG4gICAgICAgIHJldHVybiBuZXcgVmVjMihNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA0KSwgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNCkpXHJcbiAgICB9XHJcbiAgICBzdGF0aWMgYWRkKGE6IFZlYzIsIGI6IFZlYzIpOiBWZWMyIHtcclxuICAgICAgICByZXR1cm4gbmV3IFZlYzIoYS54ICsgYi54LCBhLnkgKyBiLnkpO1xyXG4gICAgfVxyXG4gICAgXHJcbn1cclxuIiwiaW1wb3J0IHsgVmVjMiB9IGZyb20gJy4vdXRpbCdcclxuXHJcbmNvbnN0IHBvc2l0aW9ucyA9IFswLCAxMTIsIDIyNCwgMzM2XTtcclxuY29uc3QgcG9zaXRpb25zUGhvbmUgPSBbLTEyLCA3MCwgMTUxLCAyMzJdO1xyXG5cclxuZXhwb3J0IGNsYXNzIFRpbGUge1xyXG4gICAgcHVibGljIHBvc2l0aW9uOiBWZWMyO1xyXG4gICAgcHVibGljIHZhbHVlOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgZWxlbWVudDogSFRNTEVsZW1lbnQ7XHJcbiAgICBwdWJsaWMgaWQgPSBNYXRoLnJhbmRvbSgpO1xyXG4gICAgcHVibGljIHBvc2l0aW9uczogbnVtYmVyW107XHJcblxyXG4gICAgcHVibGljIGdldCB4ICgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uLng7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZ2V0IHkgKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zaXRpb24ueTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih4OiBudW1iZXIsIHk6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24gPSBuZXcgVmVjMih4LCB5KTtcclxuICAgICAgICB0aGlzLnZhbHVlID0gKE1hdGgucmFuZG9tKCkgPj0gMC45ID8gMiA6IDEpO1xyXG4gICAgICAgIC8vIHRoaXMudmFsdWUgPSBNYXRoLmNlaWwoTWF0aC5yYW5kb20oKSAqIDEwKSArIDE7IC8vIEZvciB0ZXN0aW5nIGNzcyBjbGFzc2VzXHJcblxyXG4gICAgICAgIHRoaXMucG9zaXRpb25zID0gKHdpbmRvdy5pbm5lcldpZHRoID4gNjAwKSA/IHBvc2l0aW9ucyA6IHBvc2l0aW9uc1Bob25lO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEluc2VydHMgdGhlIEVsZW1lbnQgaW50byB0aGUgRE9NXHJcbiAgICBwdWJsaWMgZHJhdygpIHtcclxuICAgICAgICBjb25zdCByb290OiBIVE1MRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicm9vdFwiKSE7XHJcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwidGlsZVwiKTtcclxuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoYHRpbGUtJHt0aGlzLnZhbHVlfWApO1xyXG4gICAgICAgIGVsZW1lbnQuaW5uZXJUZXh0ID0gTWF0aC5wb3coMiwgdGhpcy52YWx1ZSkudG9TdHJpbmcoKTtcclxuXHJcbiAgICAgICAgZWxlbWVudC5zdHlsZS5sZWZ0ID0gYCR7dGhpcy5wb3NpdGlvbnNbdGhpcy5wb3NpdGlvbi54XX1weGA7XHJcbiAgICAgICAgZWxlbWVudC5zdHlsZS50b3AgPSBgJHt0aGlzLnBvc2l0aW9uc1t0aGlzLnBvc2l0aW9uLnldfXB4YDtcclxuICAgICAgICByb290Lmluc2VydEFkamFjZW50RWxlbWVudChcImJlZm9yZWVuZFwiLCBlbGVtZW50KTtcclxuICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFVwZGF0ZXMgdGhlIHRleHQgYW5kIGNsYXNzIG9mIHRoZSBIVE1MRWxlbWVudFxyXG4gICAgcHVibGljIHVwZGF0ZShyZW1vdmUgPSBmYWxzZSkge1xyXG4gICAgICAgIC8vIFRoZSB0aW1lIGl0IHRha2VzIHRvIG1vdmUgdGhlIHRpbGUgaW4gbXNcclxuICAgICAgICBjb25zdCBhbmltYXRpb25UaW1lID0gMTAwO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5sZWZ0ID0gYCR7dGhpcy5wb3NpdGlvbnNbdGhpcy5wb3NpdGlvbi54XX1weGA7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLnRvcCA9IGAke3RoaXMucG9zaXRpb25zW3RoaXMucG9zaXRpb24ueV19cHhgO1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NOYW1lID0gYHRpbGUgdGlsZS0ke3RoaXMudmFsdWV9YDtcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmlubmVyVGV4dCA9IE1hdGgucG93KDIsIHRoaXMudmFsdWUpLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIGlmIChyZW1vdmUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCBhbmltYXRpb25UaW1lKVxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJlbW92ZXMgdGhlIEhUTUxFbGVtZW50IGZyb20gdGhlIERPTVxyXG4gICAgcHVibGljIHJlbW92ZSgpIHtcclxuICAgICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ3JlYXRlcyBhIG5ldyBUaWxlIGZyb20gYSBWZWMyXHJcbiAgICBzdGF0aWMgZnJvbShwb3NpdGlvbjogVmVjMik6IFRpbGUge1xyXG4gICAgICAgIHJldHVybiBuZXcgVGlsZSAocG9zaXRpb24ueCwgcG9zaXRpb24ueSk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBEaXJlY3Rpb24gfSBmcm9tIFwiLi9tb3ZlXCI7XHJcblxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldE5leHRHcmlkKGdyaWQ6IG51bWJlcltdLCBtb3ZlOiBEaXJlY3Rpb24pOiBudW1iZXJbXSB7XHJcbiAgICBjb25zdCB0ZW1wID0gIFswLCAwLCAwLCAwLFxyXG4gICAgICAgIDAsIDAsIDAsIDAsXHJcbiAgICAgICAgMCwgMCwgMCwgMCxcclxuICAgICAgICAwLCAwLCAwLCAwLF07XHJcblxyXG4gICAgaWYgKG1vdmUgPT0gRGlyZWN0aW9uLlVwKSB7XHJcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IDQ7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgcm93OiBudW1iZXJbXSA9IFtdO1xyXG4gICAgICAgICAgICBmb3IodmFyIGogPSAwOyBqIDwgNDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICByb3cucHVzaChncmlkW2kgKyA0KmpdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByb3cgPSBzd2lwZVJvdyhyb3cpO1xyXG4gICAgICAgICAgICBmb3IodmFyIGogPSAwOyBqIDwgNDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wW2kgKyA0KmpdID0gcm93W2pdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAobW92ZSA9PSBEaXJlY3Rpb24uTGVmdCkge1xyXG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCA0OyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIHJvdzogbnVtYmVyW10gPSBbXTtcclxuICAgICAgICAgICAgZm9yKHZhciBqID0gMDsgaiA8IDQ7IGorKykge1xyXG4gICAgICAgICAgICAgICAgcm93LnB1c2goZ3JpZFs0KmkgKyBqXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcm93ID0gc3dpcGVSb3cocm93KTtcclxuICAgICAgICAgICAgZm9yKHZhciBqID0gMDsgaiA8IDQ7IGorKykge1xyXG4gICAgICAgICAgICAgICAgdGVtcFs0KmkgKyBqXSA9IHJvd1tqXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2UgaWYgKG1vdmUgPT0gRGlyZWN0aW9uLkRvd24pIHtcclxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgNDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciByb3c6IG51bWJlcltdID0gW107XHJcbiAgICAgICAgICAgIGZvcih2YXIgaiA9IDA7IGogPCA0OyBqKyspIHtcclxuICAgICAgICAgICAgICAgIHJvdy5wdXNoKGdyaWRbaSArIDQqKDMtaildKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByb3cgPSBzd2lwZVJvdyhyb3cpO1xyXG4gICAgICAgICAgICBmb3IodmFyIGogPSAwOyBqIDwgNDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wW2kgKyA0KigzLWopXSA9IHJvd1tqXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2UgaWYgKG1vdmUgPT0gRGlyZWN0aW9uLlJpZ2h0KSB7XHJcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IDQ7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgcm93OiBudW1iZXJbXSA9IFtdO1xyXG4gICAgICAgICAgICBmb3IodmFyIGogPSAwOyBqIDwgNDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICByb3cucHVzaChncmlkWzQqaSArICgzLWopXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcm93ID0gc3dpcGVSb3cocm93KTtcclxuICAgICAgICAgICAgZm9yKHZhciBqID0gMDsgaiA8IDQ7IGorKykge1xyXG4gICAgICAgICAgICAgICAgdGVtcFs0KmkgKyAoMy1qKV0gPSByb3dbal07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRlbXA7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc3dpcGVSb3cocm93OiBudW1iZXJbXSk6IG51bWJlcltdIHtcclxuICAgIGxldCBwcmV2ID0gLTE7XHJcbiAgICBsZXQgaSA9IDA7XHJcbiAgICBsZXQgdGVtcCA9IFswLCAwLCAwLCAwXTtcclxuICAgIHJvdy5mb3JFYWNoKHZhbCA9PiB7XHJcbiAgICAgICAgaWYgKHZhbCAhPSAwKSB7XHJcbiAgICAgICAgICAgIGlmIChwcmV2ID09IDEpIHtcclxuICAgICAgICAgICAgICAgIHByZXYgPSB2YWw7XHJcbiAgICAgICAgICAgICAgICB0ZW1wW2ldID0gdmFsO1xyXG4gICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHByZXYgPT0gdmFsKSB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wW2kgLSAxXSA9IDIgKiBwcmV2O1xyXG4gICAgICAgICAgICAgICAgcHJldiA9IC0xO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcHJldiA9IHZhbDtcclxuICAgICAgICAgICAgICAgIHRlbXBbaV0gPSB2YWw7XHJcbiAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIHJldHVybiB0ZW1wO1xyXG59XHJcblxyXG4iLCJpbXBvcnQgR2FtZSBmcm9tICcuL2dhbWUnXHJcbmltcG9ydCB7IERpcmVjdGlvbiB9IGZyb20gJy4vbW92ZSc7XHJcbmltcG9ydCB7IGdldE5leHRHcmlkIH0gZnJvbSAnLi9ncmlkJztcclxuaW1wb3J0IHsgbW92ZSB9IGZyb20gJy4vbW92ZSdcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFJIHtcclxuICAgIHB1YmxpYyBjdXJyZW50R3JpZDogbnVtYmVyW10gPSBbXTtcclxuICAgIHB1YmxpYyBtYXhTdGVwID0gMztcclxuICAgIHB1YmxpYyBiZXN0X21vdmUgPSAwO1xyXG4gICAgcHVibGljIG5vZGVzID0gMDtcclxuICAgIHB1YmxpYyBiZXN0TW92ZTogRGlyZWN0aW9uO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvciAoKSB7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJ1bigpIHtcclxuICAgICAgICBjb25zdCBnYW1lID0gR2FtZS5nZXQoKTtcclxuICAgICAgICBjb25zdCB0ZW1wR3JpZCA9IGdhbWUuZ2V0T25lREdyaWQoKTtcclxuICAgICAgICB0aGlzLmN1cnJlbnRHcmlkID0gdGVtcEdyaWQubWFwKHggPT4geCk7XHJcbiAgICAgICAgdGhpcy5zdGFydFNlYXJjaCgpO1xyXG4gICAgICAgIG1vdmUodGhpcy5iZXN0TW92ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGFydFNlYXJjaCgpIHtcclxuICAgICAgICB0aGlzLm5vZGVzID0gMDtcclxuICAgICAgICB0aGlzLm1heFN0ZXAgPSAzO1xyXG4gICAgICAgIGxldCBub2RlczogbnVtYmVyW10gPSBbXTtcclxuICAgICAgICB3aGlsZSh0cnVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZXMgPSAwO1xyXG4gICAgICAgICAgICBsZXQgdDEgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuICAgICAgICAgICAgdGhpcy5zZWFyY2godGhpcy5jdXJyZW50R3JpZCwgMCk7XHJcbiAgICAgICAgICAgIG5vZGVzLnB1c2gocGVyZm9ybWFuY2Uubm93KCktdDEpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5ub2RlcyA+PSAxMDAwMCB8fCB0aGlzLm1heFN0ZXAgPj0gOCkge1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5tYXhTdGVwICs9IDE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2VhcmNoKGdyaWQ6IG51bWJlcltdLCBzdGVwOiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgICAgIHRoaXMubm9kZXMrKztcclxuICAgICAgICBpZiAoc3RlcCA9PSB0aGlzLm1heFN0ZXApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXN0aW1hdGUoZ3JpZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBiZXN0U2NvcmUgPSAtMTtcclxuICAgICAgICBmb3IgKGNvbnN0IGRpciBpbiBEaXJlY3Rpb24pIHtcclxuICAgICAgICAgICAgaWYgKGlzTmFOKE51bWJlcihkaXIpKSkgY29udGludWU7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld0dyaWQgPSBnZXROZXh0R3JpZChncmlkLCBOdW1iZXIoZGlyKSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNjb3JlID0gbmV3R3JpZC5yZWR1Y2UoKGFjYywgY3VycmVudCkgPT4gYWNjICs9IGN1cnJlbnQpO1xyXG4gICAgICAgICAgICBjb25zdCBzYW1lID0gbmV3R3JpZC5ldmVyeSgodmFsdWUsIGluZGV4KSA9PiB2YWx1ZSA9PSBncmlkW2luZGV4XSk7XHJcbiAgICAgICAgICAgIGlmIChzYW1lID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHRlbXAgPSAwO1xyXG4gICAgICAgICAgICAgICAgbGV0IGVtcHR5Q2VsbHMgPSAwO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNjsgKytpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld0dyaWRbaV0gPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3R3JpZFtpXSA9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICsrZW1wdHlDZWxscztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcCArPSB0aGlzLnNlYXJjaChuZXdHcmlkLCBzdGVwICsgMSkgKiAwLjk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0dyaWRbaV0gPSA0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wICs9IHRoaXMuc2VhcmNoKG5ld0dyaWQsIHN0ZXAgKyAxKSAqIDAuMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3R3JpZFtpXSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGVtcHR5Q2VsbHMgIT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRlbXAgLz0gZW1wdHlDZWxscztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRlbXAgPSAtMWUrMjA7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHNjb3JlICsgdGVtcCA+IGJlc3RTY29yZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJlc3RTY29yZSA9IHNjb3JlICsgdGVtcDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3RlcCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmVzdE1vdmUgPSBOdW1iZXIoZGlyKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGJlc3RTY29yZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGVzdGltYXRlKGdyaWQ6IG51bWJlcltdKTogbnVtYmVyIHtcclxuICAgICAgICBsZXQgc3VtID0gMDtcclxuICAgICAgICBsZXQgcGVuYWx0eSA9IDA7XHJcbiAgICAgICAgbGV0IHplcm9zID0gMDtcclxuICAgICAgICBmb3IobGV0IGkgPTA7IGkgPCAxNjsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChncmlkW2ldID09IDApIHplcm9zKys7XHJcbiAgICAgICAgICAgIHN1bSArPSBncmlkW2ldO1xyXG4gICAgICAgICAgICBpZihpICUgNCAhPSAzKSB7XHJcbiAgICAgICAgICAgICAgICBwZW5hbHR5ICs9IE1hdGguYWJzKGdyaWRbaV0gLSBncmlkW2kgKyAxXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYoaSA8IDEyKSB7XHJcbiAgICAgICAgICAgICAgICBwZW5hbHR5ICs9IE1hdGguYWJzKGdyaWRbaV0gLSBncmlkW2kgKyA0XSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIChzdW0gKiA0IC0gcGVuYWx0eSkgKiAyO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgVmVjMiB9IGZyb20gJy4vdXRpbCdcclxuaW1wb3J0IEdhbWUgZnJvbSAnLi9nYW1lJ1xyXG5pbXBvcnQgeyBUaWxlIH0gZnJvbSAnLi90aWxlJ1xyXG5cclxuZXhwb3J0IGVudW0gRGlyZWN0aW9uIHtcclxuICAgIFVwID0gMSxcclxuICAgIERvd24sXHJcbiAgICBMZWZ0LFxyXG4gICAgUmlnaHRcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGJpbmRLZXlFdmVudHMoKSB7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIGV2ZW50ID0+IHtcclxuICAgICAgICAvKiBLZXkgdXAgKi9cclxuICAgICAgICBpZiAoZXZlbnQud2hpY2ggPT0gMzgpIHtcclxuICAgICAgICAgICAgbW92ZShEaXJlY3Rpb24uVXApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyogS2V5IGRvd24gKi9cclxuICAgICAgICBlbHNlIGlmIChldmVudC53aGljaCA9PSA0MCkge1xyXG4gICAgICAgICAgICBtb3ZlKERpcmVjdGlvbi5Eb3duKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qIEtleSBsZWZ0ICovXHJcbiAgICAgICAgZWxzZSBpZiAoZXZlbnQud2hpY2ggPT0gMzcpIHtcclxuICAgICAgICAgICAgbW92ZShEaXJlY3Rpb24uTGVmdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiBLZXkgcmlnaHQgKi9cclxuICAgICAgICBlbHNlIGlmIChldmVudC53aGljaCA9PSAzOSkge1xyXG4gICAgICAgICAgICBtb3ZlKERpcmVjdGlvbi5SaWdodCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2NvcmVcIikhLmlubmVyVGV4dCA9IGBTY29yZTogJHtHYW1lLmdldCgpLnNjb3JlfWA7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1vdmUoZGlyZWN0aW9uOiBEaXJlY3Rpb24pIHtcclxuICAgIGNvbnN0IGdhbWUgPSBHYW1lLmdldCgpO1xyXG4gICAgbGV0IGJvYXJkID0gZ2FtZS5ib2FyZENvcHkoKTtcclxuICAgIGxldCB0aWxlcyA9IGdhbWUudGlsZXM7XHJcbiAgICBsZXQgc3Y6IFZlYzI7IC8vIFNvcnRpbmcgdmVjdG9yXHJcbiAgICBsZXQgbWQ6IFZlYzI7IC8vIE1vdmUgRGlyZWN0aW9uXHJcbiAgICBsZXQgdmVydGljYWw6IGJvb2xlYW47IFxyXG5cclxuICAgIC8vIEFzc2lnbiB0aGUgcmlnaHQgZGlyZWN0aW9uIGZvciBlYWNoIG1vdmVtZW50ICh4LCB5KVxyXG4gICAgaWYgKGRpcmVjdGlvbiA9PSBEaXJlY3Rpb24uVXApIHtcclxuICAgICAgICBzdiA9IG5ldyBWZWMyKDAsIDApO1xyXG4gICAgICAgIG1kID0gbmV3IFZlYzIoMCwgLTEpO1xyXG4gICAgICAgIHZlcnRpY2FsID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGRpcmVjdGlvbiA9PSBEaXJlY3Rpb24uRG93bikge1xyXG4gICAgICAgIHN2ID0gbmV3IFZlYzIoMCwgMyk7XHJcbiAgICAgICAgbWQgPSBuZXcgVmVjMigwLCAxKTtcclxuICAgICAgICB2ZXJ0aWNhbCA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChkaXJlY3Rpb24gPT0gRGlyZWN0aW9uLkxlZnQpIHtcclxuICAgICAgICBzdiA9IG5ldyBWZWMyKDAsIDApO1xyXG4gICAgICAgIG1kID0gbmV3IFZlYzIoLTEsIDApO1xyXG4gICAgICAgIHZlcnRpY2FsID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBlbHNlIHsgLy8gaWYgKGRpcmVjdGlvbiA9PSBEaXJlY3Rpb24uUmlnaHQpXHJcbiAgICAgICAgc3YgPSBuZXcgVmVjMigzLCAwKTtcclxuICAgICAgICBtZCA9IG5ldyBWZWMyKDEsIDApO1xyXG4gICAgICAgIHZlcnRpY2FsID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHNvOiBWZWMyW10gPSBbXTsgLy8gU29ydGluZyBvcmRlciBvZiBlYWNoIHNxdWFyZVxyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNDsgaSsrKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCA0OyBqKyspIHtcclxuICAgICAgICAgICAgbGV0IHRlbXAgPSBzdi5jbG9uZSgpO1xyXG4gICAgICAgICAgICBpZiAodmVydGljYWwpIHtcclxuICAgICAgICAgICAgICAgIHRlbXAueCArPSBqO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGVtcC55ICs9IGo7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc28ucHVzaCh0ZW1wKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc3YueCAtPSBtZC54O1xyXG4gICAgICAgIHN2LnkgLT0gbWQueTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gRGV0ZXJtaW5lcyBpZiBhbnkgdGlsZSBoYXMgYWN0dWFsbHkgbW92ZWRcclxuICAgIGxldCBtb3ZlZCA9IGZhbHNlO1xyXG5cclxuICAgIGZvciAodmFyIGogPSAwOyBqIDwgc28ubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRpbGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCB0aWxlID0gdGlsZXNbaV07XHJcbiAgICAgICAgICAgIC8vIElmIHRoZSBjdXJyZW50IHRpbGUncyBwb3NpdGlvbiBpcyBlcXVhbCB0byB0aGUgc29ydGluZyBvcmRlciB2ZWN0b3JcclxuICAgICAgICAgICAgaWYgKHRpbGUucG9zaXRpb24uZXF1YWxzKHNvW2pdKSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHByZXYgPSB0aWxlLnBvc2l0aW9uLmNsb25lKCk7XHJcbiAgICAgICAgICAgICAgICBib2FyZFt0aWxlLnhdW3RpbGUueV0gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgLy8gTmV4dCBwb3NpdGlvbiBpZiB0aGUgdGlsZSBpcyBtb3ZlZCAxIHN0ZXAgaW50byB0aGUgbW92ZSBkaXJlY3Rpb25cclxuICAgICAgICAgICAgICAgIGxldCBtb3ZlVG8gPSBWZWMyLmFkZCh0aWxlLnBvc2l0aW9uLCBtZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IG5leHRWYWx1ZSA9IDA7XHJcbiAgICAgICAgICAgICAgICBpZiAobW92ZVRvLnggPCAwIHx8IG1vdmVUby54ID4gMyB8fCBtb3ZlVG8ueSA8IDAgfHwgbW92ZVRvLnkgPiAzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbW92ZVRvID0gdGlsZS5wb3NpdGlvbi5jbG9uZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5leHQgPSBib2FyZFttb3ZlVG8ueF1bbW92ZVRvLnldO1xyXG4gICAgICAgICAgICAgICAgICAgIG5leHRWYWx1ZSA9ICBuZXh0ID8gbmV4dC52YWx1ZSA6IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUobmV4dFZhbHVlID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGlsZS5wb3NpdGlvbiA9IG1vdmVUby5jbG9uZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtb3ZlVG8gPSBWZWMyLmFkZCh0aWxlLnBvc2l0aW9uLCBtZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobW92ZVRvLnggPCAwIHx8IG1vdmVUby54ID4gMyB8fCBtb3ZlVG8ueSA8IDAgfHwgbW92ZVRvLnkgPiAzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlVG8gPSB0aWxlLnBvc2l0aW9uLmNsb25lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dCA9IGJvYXJkW21vdmVUby54XVttb3ZlVG8ueV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHRWYWx1ZSA9ICBuZXh0ID8gbmV4dC52YWx1ZSA6IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG5leHRWYWx1ZSA9PSB0aWxlLnZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLypcclxuICAgICAgICAgICAgICAgICAgICAqICAgdGlsZSBpcyBiZWluZyByZW1vdmVkXHJcbiAgICAgICAgICAgICAgICAgICAgKiAgIG5leHQgaXMgdGhlIHRpbGVzIGxhdGVyIGluIHRoZSBzb3J0aW5nIG9yZGVyIHdpdGggdGhlIHNhbWUgdmFsdWVcclxuICAgICAgICAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBuZXh0ID0gdGlsZXNbdGlsZXMuZmluZEluZGV4KHQgPT4gdC5wb3NpdGlvbi5lcXVhbHMobW92ZVRvKSAmJiB0LmlkICE9IHRpbGUuaWQpXTtcclxuICAgICAgICAgICAgICAgICAgICBuZXh0LnZhbHVlICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2FtZS5zY29yZSArPSBNYXRoLnBvdygyLCBuZXh0LnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICB0aWxlLnBvc2l0aW9uID0gbW92ZVRvO1xyXG4gICAgICAgICAgICAgICAgICAgIGJvYXJkW25leHQueF1bbmV4dC55XSA9IG5leHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gTW92ZSB0aWxlXHJcbiAgICAgICAgICAgICAgICAgICAgdGlsZS51cGRhdGUodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGlsZXMuc3BsaWNlKGksIDEpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRpbGUucG9zaXRpb24uZXF1YWxzKHByZXYpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBib2FyZFt0aWxlLnhdW3RpbGUueV0gPSB0aWxlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICghdGlsZS5wb3NpdGlvbi5lcXVhbHMocHJldikpIHtcclxuICAgICAgICAgICAgICAgICAgICBtb3ZlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB0aWxlcy5mb3JFYWNoKHRpbGUgPT4ge1xyXG4gICAgICAgIHRpbGUudXBkYXRlKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAobW92ZWQpIHtcclxuICAgICAgICBnYW1lLmJvYXJkID0gYm9hcmQ7XHJcbiAgICAgICAgZ2FtZS5uZXh0TW92ZSgpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgZ2FtZS5zdG9wID0gdHJ1ZTtcclxuICAgIH1cclxufVxyXG5cclxuIiwiaW1wb3J0IHsgVGlsZSB9IGZyb20gJy4vdGlsZSdcclxuaW1wb3J0IHsgVmVjMiB9IGZyb20gJy4vdXRpbCc7XHJcbmltcG9ydCBBSSBmcm9tICcuL2FpJ1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZSB7XHJcbiAgICAvKiBTaW5nbGVUb24gc2V0dXAgKi9cclxuICAgIC8vICsrKysrKysrKysrKysrKysrKysrKysrKytcclxuICAgIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBHYW1lO1xyXG4gICAgcHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0KCkge1xyXG4gICAgICAgIGlmICghR2FtZS5pbnN0YW5jZSkge1xyXG4gICAgICAgICAgICBHYW1lLmluc3RhbmNlID0gbmV3IEdhbWUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIEdhbWUuaW5zdGFuY2U7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIFN0YXRpYyBNZXRob2RzXHJcbiAgICBwdWJsaWMgc3RhdGljIG5ld0dhbWUoKSB7XHJcbiAgICAgICAgY29uc3QgZ2FtZSA9IHRoaXMuaW5zdGFuY2U7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA0OyBpKyspIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCA0OyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCB0aWxlID0gZ2FtZS5ib2FyZFtpXVtqXTtcclxuICAgICAgICAgICAgICAgIGlmICh0aWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2FtZS5ib2FyZFtpXVtqXSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgdGlsZS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgcmFuZG9tMSA9IFZlYzIucmFuZG9tKCk7XHJcbiAgICAgICAgbGV0IHJhbmRvbTIgPSBWZWMyLnJhbmRvbSgpO1xyXG4gICAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgcmFuZG9tIHBvc2l0aW9ucyBhcmVuJ3QgdGhlIHNhbWVcclxuICAgICAgICB3aGlsZShyYW5kb20xLmVxdWFscyhyYW5kb20yKSkge1xyXG4gICAgICAgICAgICByYW5kb20yID0gVmVjMi5yYW5kb20oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCB0aWxlMSA9IFRpbGUuZnJvbShyYW5kb20xKS5kcmF3KCk7XHJcbiAgICAgICAgbGV0IHRpbGUyID0gVGlsZS5mcm9tKHJhbmRvbTIpLmRyYXcoKTtcclxuXHJcbiAgICAgICAgLy8gSW5zZXJ0IHRoZSB0aWxlcyBpbnRvIHRoZSBnYW1lIGJvYXJkXHJcbiAgICAgICAgZ2FtZS5ib2FyZFt0aWxlMS54XVt0aWxlMS55XSA9IHRpbGUxO1xyXG4gICAgICAgIGdhbWUuYm9hcmRbdGlsZTIueF1bdGlsZTIueV0gPSB0aWxlMjtcclxuICAgIH1cclxuICAgIC8vICsrKysrKysrKysrKysrKysrKysrKysrKytcclxuICAgIHB1YmxpYyBhaTogQUkgPSBuZXcgQUkoKTtcclxuICAgIHB1YmxpYyBzdG9wOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwdWJsaWMgZmFzdDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHVibGljIHNjb3JlOiBudW1iZXIgPSAwO1xyXG5cclxuICAgIC8vIEluc3RhbmNlIG1ldGhvZHNcclxuICAgIHB1YmxpYyBib2FyZDogKFRpbGUgfCBudWxsKVtdW10gPSBbW251bGwsIG51bGwsIG51bGwsIG51bGxdLCBbbnVsbCwgbnVsbCwgbnVsbCwgbnVsbF0sIFtudWxsLCBudWxsLCBudWxsLCBudWxsXSwgW251bGwsIG51bGwsIG51bGwsIG51bGxdXTtcclxuICAgIHB1YmxpYyBib2FyZENvcHkoKTogKFRpbGUgfCBudWxsKVtdW10ge1xyXG4gICAgICAgIGxldCBhcnI6IChUaWxlIHwgbnVsbClbXVtdID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA0OyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IGluc2lkZSA9IHRoaXMuYm9hcmRbaV0ubWFwKHggPT4geCk7XHJcbiAgICAgICAgICAgIGFyci5wdXNoKGluc2lkZSk7XHJcbiAgICAgICAgfSAgICBcclxuICAgICAgICByZXR1cm4gYXJyO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIExvZ3MgdGhlIGdhbWUgYm9hcmQgbGlrZSB0aGUgd2F5IGl0IGFwcGVhcnMgb24gc2NyZWVuXHJcbiAgICBwdWJsaWMgbG9nQm9hcmQoYj86IChUaWxlIHwgbnVsbClbXVtdKSB7XHJcbiAgICAgICAgbGV0IGZyb20gPSBiIHx8IHRoaXMuYm9hcmQ7XHJcbiAgICAgICAgbGV0IGJvYXJkU3RyaW5nID0gXCJcIjtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDQ7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgc3RyaW5nOiBudW1iZXJbXSA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDQ7IGorKykge1xyXG4gICAgICAgICAgICAgICAgbGV0IHRpbGUgPSBmcm9tW2pdW2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRpbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBzdHJpbmcucHVzaChNYXRoLnBvdygyLCB0aWxlLnZhbHVlKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHN0cmluZy5wdXNoKDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxldCBzdHIgPSBzdHJpbmcuam9pbihcIlxcdFwiKTtcclxuICAgICAgICAgICAgYm9hcmRTdHJpbmcgKz0gc3RyO1xyXG4gICAgICAgICAgICBib2FyZFN0cmluZyArPSBcIlxcblwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zb2xlLmxvZyhib2FyZFN0cmluZyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmV0dXJucyBhIGxpc3Qgb2YgYWxsIHRoZSBvbiB0aGUgYm9hcmRcclxuICAgIHB1YmxpYyBnZXQgdGlsZXMgKCk6IFRpbGVbXSB7XHJcbiAgICAgICAgbGV0IGxpc3Q6IFRpbGVbXSA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgNDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGlsZSA9IHRoaXMuYm9hcmRbaV1bal07XHJcbiAgICAgICAgICAgICAgICBpZiAodGlsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpc3QucHVzaCh0aWxlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbGlzdDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHVibGljIG5leHRNb3ZlKHRpbWUgPSAxMDApIHtcclxuICAgICAgICBsZXQgcG9zID0gVmVjMi5yYW5kb20oKTtcclxuICAgICAgICB3aGlsZSh0aGlzLnRpbGVzLnNvbWUodGlsZSA9PiB0aWxlLnBvc2l0aW9uLmVxdWFscyhwb3MpKSkge1xyXG4gICAgICAgICAgICBwb3MgPSBWZWMyLnJhbmRvbSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB0aWxlID0gVGlsZS5mcm9tKHBvcykuZHJhdygpO1xyXG4gICAgICAgIHRoaXMuYm9hcmRbdGlsZS54XVt0aWxlLnldID0gdGlsZTtcclxuICAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0T25lREdyaWQoKTogbnVtYmVyW10ge1xyXG4gICAgICAgIGxldCBncmlkOiBudW1iZXJbXSA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgNDsgeCsrKSB7XHJcbiAgICAgICAgICAgIGZvcihsZXQgeSA9IDA7IHkgPCA0OyB5KyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRpbGUgPSB0aGlzLmJvYXJkW3ldW3hdO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRpbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBncmlkLnB1c2goTWF0aC5wb3coMiwgdGlsZS52YWx1ZSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ3JpZC5wdXNoKDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBncmlkO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBwcmV2VGltZTogbnVtYmVyID0gMDtcclxuXHJcbiAgICBwdWJsaWMgc3RhcnRBSSgpIHtcclxuICAgICAgICBsZXQgdDAgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuICAgICAgICB0aGlzLmFpLnJ1bigpO1xyXG4gICAgICAgIGxldCB0MSA9IHBlcmZvcm1hbmNlLm5vdygpOyBcclxuICAgICAgICBpZiAodGhpcy5zdG9wKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RvcCA9IGZhbHNlO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2NvcmVcIikhLmlubmVyVGV4dCA9IGBTY29yZTogJHt0aGlzLnNjb3JlfWA7XHJcbiAgICAgICAgY29uc3QgdGltZSA9IDEwMCAtICh0MSAtIHQwKTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoIXRoaXMuZmFzdCkge1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0b3ApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0b3AgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0QUkoKTtcclxuICAgICAgICAgICAgfSwgdGltZSA8IDAgPyAwIDogdGltZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydEFJKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICBcclxufSIsImltcG9ydCB7IFRpbGUgfSBmcm9tICcuL3RpbGUnXHJcbmltcG9ydCB7IFZlYzIgfSBmcm9tICcuL3V0aWwnXHJcbmltcG9ydCB7IGJpbmRLZXlFdmVudHMgfSBmcm9tICcuL21vdmUnXHJcbmltcG9ydCBHYW1lIGZyb20gJy4vZ2FtZSc7XHJcblxyXG4vLyBBZGRzIHR3byByYW5kb20gdGlsZXMgdG8gdGhlIGdhbWUgYm9hcmQgYW5kIGludG8gdGhlIERPTVxyXG5leHBvcnQgZnVuY3Rpb24gc2V0dXAoKSB7XHJcbiAgICBjb25zdCByb290OiBIVE1MRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicm9vdFwiKSE7XHJcbiAgICBsZXQgcmFuZG9tMSA9IFZlYzIucmFuZG9tKCk7XHJcbiAgICBsZXQgcmFuZG9tMiA9IFZlYzIucmFuZG9tKCk7XHJcbiAgICAvLyBNYWtlIHN1cmUgdGhlIHJhbmRvbSBwb3NpdGlvbnMgYXJlbid0IHRoZSBzYW1lXHJcbiAgICB3aGlsZShyYW5kb20xLmVxdWFscyhyYW5kb20yKSkge1xyXG4gICAgICAgIHJhbmRvbTIgPSBWZWMyLnJhbmRvbSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCB0aWxlMSA9IFRpbGUuZnJvbShyYW5kb20xKS5kcmF3KCk7XHJcbiAgICBsZXQgdGlsZTIgPSBUaWxlLmZyb20ocmFuZG9tMikuZHJhdygpO1xyXG4gICAgXHJcbiAgICAvLyBsZXQgdGlsZTEgPSBuZXcgVGlsZSgzLCAxKS5kcmF3KCk7XHJcbiAgICAvLyBsZXQgdGlsZTIgPSBuZXcgVGlsZSgwLCAzKS5kcmF3KCk7XHJcblxyXG4gICAgLy8gSW5zZXJ0IHRoZSB0aWxlcyBpbnRvIHRoZSBnYW1lIGJvYXJkXHJcbiAgICBjb25zdCBnYW1lID0gR2FtZS5nZXQoKTtcclxuICAgIGdhbWUuYm9hcmRbdGlsZTEueF1bdGlsZTEueV0gPSB0aWxlMTtcclxuICAgIGdhbWUuYm9hcmRbdGlsZTIueF1bdGlsZTIueV0gPSB0aWxlMjtcclxuXHJcbiAgICBiaW5kS2V5RXZlbnRzKCk7XHJcbn0iLCJpbXBvcnQgeyBzZXR1cCB9IGZyb20gJy4vc2V0dXAnXHJcbmltcG9ydCBHYW1lIGZyb20gJy4vZ2FtZSdcclxuaW1wb3J0IHsgc3dpcGVSb3cgfSBmcm9tICcuL2dyaWQnXHJcblxyXG4vL0B0cy1pZ25vcmVcclxud2luZG93LkdhbWUgPSBHYW1lO1xyXG5cclxuXHJcbigoKSA9PiB7XHJcbiAgICBzZXR1cCgpO1xyXG59KSgpOyJdLCJzb3VyY2VSb290IjoiIn0=