!function(t){var e={};function i(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(o,r,function(e){return t[e]}.bind(null,r));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Graph=class{constructor(t,e,i,o=1){this.x=t,this.y=e,this.coord=`${t}:${e}`,this.solid=i,this.movementCost=o}}},function(t,e,i){"use strict";var o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var r=o(i(2)),s=function(){function t(t,e,i){this.blockSize=40,this.drawmode=-1,this.algorithm="astar",this.options={diagonal:!1,smoothenPath:!1,heuristic:"manhattan"},this.rectangles=[],this.grid=t,this.start=this.grid.get(e.x,e.y),this.end=this.grid.get(i.x,i.y),this.paper=Raphael("grid-container",t.width*this.blockSize,t.height*this.blockSize),this.initSVG()}return t.prototype.findPath=function(){var t=this;this.clear(!0);var e=new r.AStar;"astar"===this.algorithm?e=new r.AStar({diagonal:this.options.diagonal,heuristic:this.options.heuristic,smoothenPath:this.options.smoothenPath}):"bfs"===this.algorithm?e=new r.BFS({diagonal:this.options.diagonal,heuristic:this.options.heuristic}):"dijkstra"===this.algorithm&&(e=new r.Dijkstra({diagonal:this.options.diagonal,smoothenPath:this.options.smoothenPath}));var i=e.findPath({x:this.start.x,y:this.start.y},{x:this.end.x,y:this.end.y},this.grid),o="M";i.path.forEach((function(e){var i=e.x*t.blockSize+t.blockSize/2,r=e.y*t.blockSize+t.blockSize/2;o+=i+" "+r+"L"})),this.pathSVG&&this.pathSVG.remove(),this.pathSVG=this.paper.path(o),this.pathSVG.attr({"stroke-width":2,stroke:"purple"}),i.open.forEach((function(e){e.coord!==t.start.coord&&e.coord!==t.end.coord&&t.rectangles[e.y][e.x].attr("fill","orange")})),i.closed.forEach((function(e){e.coord!==t.start.coord&&e.coord!==t.end.coord&&t.rectangles[e.y][e.x].attr("fill","#ccbfb3")}))},t.prototype.initSVG=function(){var t=this;this.grid.matrix.forEach((function(e,i){var o=[];e.forEach((function(e,r){var s=t.paper.rect(r*t.blockSize,i*t.blockSize,t.blockSize,t.blockSize),n=r+":"+i,a=e?"gray":"beige";n==t.start.coord?a="green":n===t.end.coord&&(a="red"),s.attr({stroke:"white",strokeWidth:1,fill:a}),s.data({x:r,y:i,coord:n}),s.mousemove((function(){n!==t.start.coord&&n!==c.end.coord&&(0==t.drawmode&&"gray"===s.attr("fill")?(s.attr("fill","beige"),t.grid.setSolid(r,i,!1)):1==t.drawmode&&(s.attr("fill","gray"),t.grid.setSolid(r,i,!0)))})),s.mousedown((function(e){2!=e.button&&("gray"!==s.attr("fill")?t.drawmode=1:t.drawmode=0)})),s.click((function(e){2!=e.button&&n!==t.start.coord&&n!==c.end.coord&&("gray"!==s.attr("fill")?(s.attr("fill","gray"),t.grid.setSolid(r,i,!0)):(s.attr("fill","beige"),t.grid.setSolid(r,i,!1)),t.drawmode=-1)})),s.mouseup((function(){t.drawmode=-1})),o.push(s)})),t.rectangles.push(o)}))},t.prototype.clear=function(t){void 0===t&&(t=!1),this.pathSVG&&this.pathSVG.remove();for(var e=0;e<this.grid.height;e++)for(var i=0;i<this.grid.width;i++)i==this.start.x&&e==this.start.y||i==this.end.x&&e==this.end.y||t&&l.get(i,e).solid||(this.grid.setSolid(i,e,!1),this.rectangles[e][i].attr("fill","beige"))},t.prototype.random=function(){var t=this;this.pathSVG&&this.pathSVG.remove(),this.rectangles.forEach((function(e,i){e.forEach((function(e,o){o==t.start.x&&i==t.start.y||o==t.end.x&&i==t.end.y||(Math.random()>.75?(t.grid.setSolid(o,i,!0),e.attr("fill","gray")):(t.grid.setSolid(o,i,!1),e.attr("fill","beige")))}))}))},t}(),n=document.getElementById("grid-container"),a=Math.floor(n.clientWidth/40),h=Math.floor(n.clientHeight/40),l=new r.Grid(a,h),c=new s(l,{x:1,y:1},{x:a-2,y:h-2}),d=document.getElementById("start"),u=document.getElementById("random"),g=document.getElementById("clear"),f=document.getElementById("diagonal"),p=document.getElementById("smooth");d.onclick=function(){return c.findPath()},u.onclick=function(){return c.random()},g.onclick=function(){return c.clear()},f.onclick=function(){c.options.diagonal=!c.options.diagonal,f.textContent="Diagonal: "+c.options.diagonal},p.onclick=function(){c.options.smoothenPath=!c.options.smoothenPath,p.textContent="Smooth: "+c.options.smoothenPath},document.getElementById("algorithm").onchange=function(t){return c.algorithm=t.target.value},document.getElementById("heuristic").onchange=function(t){return c.options.heuristic=t.target.value}},function(t,e,i){"use strict";function o(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}Object.defineProperty(e,"__esModule",{value:!0}),o(i(3)),o(i(0)),o(i(4)),o(i(5)),o(i(6)),o(i(7))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const o=i(0);e.Grid=class{constructor(t,e){this.matrix=[],this.map=[],this.width=t,this.height=e,this.matrix=new Array(e).fill(new Array(t).fill(0)),this.fill(this.matrix)}get(t,e){return this.map[e][t]}set(t,e,i){this.map[e][t]=i}setSolid(t,e,i){this.matrix[e][t]=Number(i),this.map[e][t].solid=i}fill(t){let e=0==this.map.length;for(let i=0;i<t.length;i++){e?this.map.push([]):this.map[i].length=0;for(let e=0;e<t[i].length;e++){let r=new o.Graph(e,i,Boolean(t[i][e]));this.map[i].push(r)}}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.h=["manhattan","octile","eucledian","chebyshev"]},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.AStar=class{constructor(t={}){this.diagonalCost=1,this.diagonal=t.diagonal||!1,this.heuristic=t.heuristic||"manhattan",this.passDiagonal=t.passDiagonal||!1,t.smoothenPath&&(this.diagonalCost=Math.SQRT2)}findPath(t,e,i){let o=i.get(t.x,t.y),r=[o],s=[],n={},a={},h={},l=[],c=`${t.x}:${t.y}`,d=`${e.x}:${e.y}`;for(n[c]=0,a[c]=0;r.length>0;){if(s.push(o),o=r.pop(),o.coord===d){let e=[],n=[];for(;o.coord!=c;)e.push({x:o.x,y:o.y}),n.push(o),o=h[o.coord];e.push({x:t.x,y:t.y}),n.push(i.get(t.x,t.y)),e.reverse(),n.reverse();let a=e.length;return{path:e,nodes:n,open:r,closed:s,length:a}}l=this.getNeighbours(o,d,i),l.forEach((t,i)=>{let s=t[0],l=a[o.coord]+s.movementCost+(t[1]>3?this.diagonalCost-1:0);if(void 0===a[s.coord]||l<a[s.coord]){let t=this.hvalue(e,s);a[s.coord]=l,n[s.coord]=l+t,h[s.coord]=o,r.insertSorted(s,(t,e)=>n[e.coord]-n[t.coord])}})}return{path:[],nodes:[],open:r,closed:s,length:0}}hvalue(t,e){let i=0;if("octile"==this.heuristic){let o=1,r=Math.SQRT2,s=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);i=o*(s+n)+(r-2*o)*Math.min(s,n)}else if("eucledian"==this.heuristic){let o=1,r=Math.abs(e.x-t.x),s=Math.abs(e.y-t.y);i=o*Math.sqrt(r*r+s*s)}else if("chebyshev"==this.heuristic){let o=1,r=1,s=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);i=o*(s+n)+(r-2*o)*Math.min(s,n)}else i=Math.abs(t.x-e.x)+Math.abs(t.y-e.y);return i}getNeighbours(t,e,i){let o=[],r=[[1,0],[0,1],[-1,0],[0,-1],[1,1],[1,-1],[-1,1],[-1,-1]];for(let s=0;s<(this.diagonal?8:4);s++){if(t.x+r[s][0]>i.width-1||t.x+r[s][0]<0)continue;if(t.y+r[s][1]>i.height-1||t.y+r[s][1]<0)continue;if(!this.passDiagonal&&s>3&&i.get(t.x+r[s][0],t.y).solid&&i.get(t.x,t.y+r[s][1]).solid)continue;let n=i.get(t.x+r[s][0],t.y+r[s][1]);n.solid&&n.coord!==e||o.push([n,s])}return o}},Array.prototype.insertSorted=function(t,e){if(this.length<1||e(t,this[this.length-1])>=0)return this.push(t),this;for(var i=this.length-2;i>=0;i--)if(e(t,this[i])>=0)return this.splice(i+1,0,t),this;return this.splice(0,0,t),this}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.BFS=class{constructor(t={}){this.diagonal=t.diagonal||!1,this.heuristic=t.heuristic||"manhattan",this.passDiagonal=t.passDiagonal||!1}findPath(t,e,i){let o=i.get(t.x,t.y),r=[o],s=[],n={},a={},h=[],l=`${t.x}:${t.y}`,c=`${e.x}:${e.y}`;for(a[l]=0;r.length>0;){if(s.push(o),o=r.pop(),o.coord===c){let e=[],a=[];for(;o.coord!=l;)e.push({x:o.x,y:o.y}),a.push(o),o=n[o.coord];e.push({x:t.x,y:t.y}),a.push(i.get(t.x,t.y)),e.reverse(),a.reverse();let h=e.length;return{path:e,nodes:a,open:r,closed:s,length:h}}h=this.getNeighbours(o,c,i),h.forEach((t,i)=>{let s=t[0],h=this.hvalue(e,s);(void 0===a[s.coord]||h<a[s.coord])&&(a[s.coord]=h,n[s.coord]=o,r.insertSorted(s,(t,e)=>a[e.coord]-a[t.coord]))})}return{path:[],nodes:[],open:r,closed:s,length:0}}hvalue(t,e){let i=0;if("octile"==this.heuristic){let o=1,r=Math.SQRT2,s=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);i=o*(s+n)+(r-2*o)*Math.min(s,n)}else if("eucledian"==this.heuristic){let o=1,r=Math.abs(e.x-t.x),s=Math.abs(e.y-t.y);i=o*Math.sqrt(r*r+s*s)}else if("chebyshev"==this.heuristic){let o=1,r=1,s=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);i=o*(s+n)+(r-2*o)*Math.min(s,n)}else i=Math.abs(t.x-e.x)+Math.abs(t.y-e.y);return i}getNeighbours(t,e,i){let o=[],r=[[1,0],[0,1],[-1,0],[0,-1],[1,1],[1,-1],[-1,1],[-1,-1]];for(let s=0;s<(this.diagonal?8:4);s++){if(t.x+r[s][0]>i.width-1||t.x+r[s][0]<0)continue;if(t.y+r[s][1]>i.height-1||t.y+r[s][1]<0)continue;if(!this.passDiagonal&&s>3&&i.get(t.x+r[s][0],t.y).solid&&i.get(t.x,t.y+r[s][1]).solid)continue;let n=i.get(t.x+r[s][0],t.y+r[s][1]);n.solid&&n.coord!==e||o.push([n,s])}return o}},Array.prototype.insertSorted=function(t,e){if(this.length<1||e(t,this[this.length-1])>=0)return this.push(t),this;for(var i=this.length-2;i>=0;i--)if(e(t,this[i])>=0)return this.splice(i+1,0,t),this;return this.splice(0,0,t),this}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Dijkstra=class{constructor(t={}){this.diagonalCost=1,this.diagonal=t.diagonal||!1,this.passDiagonal=t.passDiagonal||!1,t.smoothenPath&&(this.diagonalCost=Math.SQRT2)}findPath(t,e,i){let o=i.get(t.x,t.y),r=[o],s=[],n={},a={},h=[],l=`${t.x}:${t.y}`,c=`${e.x}:${e.y}`;for(a[l]=0;r.length>0;){if(s.push(o),o=r.pop(),o.coord===c){let e=[],a=[];for(;o.coord!=l;)e.push({x:o.x,y:o.y}),a.push(o),o=n[o.coord];e.push({x:t.x,y:t.y}),a.push(i.get(t.x,t.y)),e.reverse(),a.reverse();let h=e.length;return{path:e,nodes:a,open:r,closed:s,length:h}}h=this.getNeighbours(o,c,i),h.forEach((t,e)=>{let i=t[0],s=a[o.coord]+i.movementCost+(t[1]>3?this.diagonalCost-1:0);(void 0===a[i.coord]||s<a[i.coord])&&(a[i.coord]=s,n[i.coord]=o,r.insertSorted(i,(t,e)=>a[e.coord]-a[t.coord]))})}return{path:[],nodes:[],open:r,closed:s,length:0}}getNeighbours(t,e,i){let o=[],r=[[1,0],[0,1],[-1,0],[0,-1],[1,1],[1,-1],[-1,1],[-1,-1]];for(let s=0;s<(this.diagonal?8:4);s++){if(t.x+r[s][0]>i.width-1||t.x+r[s][0]<0)continue;if(t.y+r[s][1]>i.height-1||t.y+r[s][1]<0)continue;if(!this.passDiagonal&&s>3&&i.get(t.x+r[s][0],t.y).solid&&i.get(t.x,t.y+r[s][1]).solid)continue;let n=i.get(t.x+r[s][0],t.y+r[s][1]);n.solid&&n.coord!==e||o.push([n,s])}return o}},Array.prototype.insertSorted=function(t,e){if(this.length<1||e(t,this[this.length-1])>=0)return this.push(t),this;for(var i=this.length-2;i>=0;i--)if(e(t,this[i])>=0)return this.splice(i+1,0,t),this;return this.splice(0,0,t),this}}]);