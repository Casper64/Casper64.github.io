!function(t){var e={};function i(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(r,o,function(e){return t[e]}.bind(null,o));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Graph=class{constructor(t,e,i,r=1){this.x=t,this.y=e,this.coord=`${t}:${e}`,this.solid=i,this.movementCost=r}}},function(t,e,i){"use strict";var r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var o=r(i(2)),s=function(){function t(t,e,i){this.blockSize=30,this.drawmode=-1,this.rectangles=[],this.grid=t,this.start=this.grid.get(e.x,e.y),this.end=this.grid.get(i.x,i.y),this.paper=Raphael("grid-container",t.width*this.blockSize,t.height*this.blockSize),this.initSVG()}return t.prototype.findPath=function(){var t=this;this.clear(!0);var e=new o.AStar({diagonal:!0,heuristic:"octile",smoothenPath:!0}).findPath({x:this.start.x,y:this.start.y},{x:this.end.x,y:this.end.y},this.grid);console.log(e);var i="M";e.path.forEach((function(e){var r=e.x*t.blockSize+t.blockSize/2,o=e.y*t.blockSize+t.blockSize/2;i+=r+" "+o+"L"})),this.pathSVG&&this.pathSVG.remove(),this.pathSVG=this.paper.path(i),this.pathSVG.attr({"stroke-width":2,stroke:"purple"}),e.open.forEach((function(e){e.coord!==t.start.coord&&e.coord!==t.end.coord&&t.rectangles[e.y][e.x].attr("fill","orange")})),e.closed.forEach((function(e){e.coord!==t.start.coord&&e.coord!==t.end.coord&&t.rectangles[e.y][e.x].attr("fill","#ccbfb3")}))},t.prototype.initSVG=function(){var t=this;this.grid.matrix.forEach((function(e,i){var r=[];e.forEach((function(e,o){var s=t.paper.rect(o*t.blockSize,i*t.blockSize,t.blockSize,t.blockSize),n=o+":"+i,h=e?"gray":"beige";n==t.start.coord?h="green":n===t.end.coord&&(h="red"),s.attr({stroke:"white",strokeWidth:1,fill:h}),s.data({x:o,y:i,coord:n}),s.mousemove((function(){n!==t.start.coord&&n!==a.end.coord&&(0==t.drawmode&&"gray"===s.attr("fill")?(s.attr("fill","beige"),t.grid.setSolid(o,i,!1)):1==t.drawmode&&(s.attr("fill","gray"),t.grid.setSolid(o,i,!0)))})),s.mousedown((function(e){2!=e.button&&("gray"!==s.attr("fill")?t.drawmode=1:t.drawmode=0)})),s.click((function(e){2!=e.button&&n!==t.start.coord&&n!==a.end.coord&&("gray"!==s.attr("fill")?(s.attr("fill","gray"),t.grid.setSolid(o,i,!0)):(s.attr("fill","beige"),t.grid.setSolid(o,i,!1)),t.drawmode=-1)})),s.mouseup((function(){t.drawmode=-1})),r.push(s)})),t.rectangles.push(r)}))},t.prototype.clear=function(t){void 0===t&&(t=!1),this.pathSVG&&this.pathSVG.remove();for(var e=0;e<this.grid.height;e++)for(var i=0;i<this.grid.width;i++)i==this.start.x&&e==this.start.y||i==this.end.x&&e==this.end.y||t&&n.get(i,e).solid||(this.grid.setSolid(i,e,!1),this.rectangles[e][i].attr("fill","beige"))},t.prototype.random=function(){var t=this;this.pathSVG&&this.pathSVG.remove(),this.rectangles.forEach((function(e,i){e.forEach((function(e,r){r==t.start.x&&i==t.start.y||r==t.end.x&&i==t.end.y||(Math.random()>.75?(t.grid.setSolid(r,i,!0),e.attr("fill","gray")):(t.grid.setSolid(r,i,!1),e.attr("fill","beige")))}))}))},t}(),n=new o.Grid(40,15),a=new s(n,{x:1,y:1},{x:38,y:13}),h=document.getElementById("start"),l=document.getElementById("random"),c=document.getElementById("clear");h.onclick=function(){return a.findPath()},l.onclick=function(){return a.random()},c.onclick=function(){return a.clear()}},function(t,e,i){"use strict";function r(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}Object.defineProperty(e,"__esModule",{value:!0}),r(i(3)),r(i(0)),r(i(4))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=i(0);e.Grid=class{constructor(t,e){this.matrix=[],this.map=[],this.width=t,this.height=e,this.matrix=new Array(e).fill(new Array(t).fill(0)),this.fill(this.matrix)}get(t,e){return this.map[e][t]}set(t,e,i){this.map[e][t]=i}setSolid(t,e,i){this.matrix[e][t]=Number(i),this.map[e][t].solid=i}fill(t){let e=0==this.map.length;for(let i=0;i<t.length;i++){e?this.map.push([]):this.map[i].length=0;for(let e=0;e<t[i].length;e++){let o=new r.Graph(e,i,Boolean(t[i][e]));this.map[i].push(o)}}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.AStar=class{constructor(t={}){this.diagonalCost=1,this.diagonal=t.diagonal||!1,this.heuristic=t.heuristic||"manhattan",this.smooth=t.smoothenPath||!1,this.passDiagonal=t.passDiagonal||!1,this.smooth&&(this.diagonalCost=Math.SQRT2)}findPath(t,e,i){let r=i.get(t.x,t.y),o=[r],s=[],n={},a={},h={},l=[],c=`${t.x}:${t.y}`,d=`${e.x}:${e.y}`;for(n[c]=0,a[c]=0;;){if(s.push(r),!(o.length>0))return console.log("failed!"),{path:[],nodes:[],open:o,closed:s,length:0};if(r=o.pop(),r.coord===d){let e=[],n=[],a=0;for(;r.coord!=c;)e.push({x:r.x,y:r.y}),n.push(r),r=h[r.coord],a++;e.push({x:t.x,y:t.y}),n.push(i.get(t.x,t.y)),e.reverse(),n.reverse();let l=e.length;return{path:e,nodes:n,open:o,closed:s,length:l}}l=this.getNeighbours(r,d,i),l.forEach((t,i)=>{let s=t[0],l=a[r.coord]+s.movementCost+(t[1]>3?this.diagonalCost-1:0);if(void 0===a[s.coord]||l<a[s.coord]){let t=this.hvalue(e,s);a[s.coord]=l,n[s.coord]=l+t,h[s.coord]=r,o.insertSorted(s,(t,e)=>n[e.coord]-n[t.coord])}})}}hvalue(t,e){let i=0;if("octile"==this.heuristic){let r=1,o=Math.SQRT2,s=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);i=r*(s+n)+(o-2*r)*Math.min(s,n)}else if("eucledian"==this.heuristic){let r=1,o=Math.abs(e.x-t.x),s=Math.abs(e.y-t.y);i=r*Math.sqrt(o*o+s*s)}else if("chebyshev"==this.heuristic){let r=1,o=1,s=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);i=r*(s+n)+(o-2*r)*Math.min(s,n)}else i=Math.abs(t.x-e.x)+Math.abs(t.y-e.y);return i}getNeighbours(t,e,i){let r=[],o=[[1,0],[0,1],[-1,0],[0,-1],[1,1],[1,-1],[-1,1],[-1,-1]];for(let s=0;s<(this.diagonal?8:4);s++){if(t.x+o[s][0]>i.width-1||t.x+o[s][0]<0)continue;if(t.y+o[s][1]>i.height-1||t.y+o[s][1]<0)continue;if(!this.passDiagonal&&s>3&&i.get(t.x+o[s][0],t.y).solid&&i.get(t.x,t.y+o[s][1]).solid)continue;let n=i.get(t.x+o[s][0],t.y+o[s][1]);n.solid&&n.coord!==e||r.push([n,s])}return r}},Array.prototype.insertSorted=function(t,e){if(this.length<1||e(t,this[this.length-1])>=0)return this.push(t),this;for(var i=this.length-2;i>=0;i--)if(e(t,this[i])>=0)return this.splice(i+1,0,t),this;return this.splice(0,0,t),this}}]);