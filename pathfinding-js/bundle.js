!function(t){var e={};function o(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=e,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(i,r,function(e){return t[e]}.bind(null,r));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=1)}([function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Graph=class{constructor(t,e,o,i=1){this.x=t,this.y=e,this.coord=`${t}:${e}`,this.solid=o,this.movementCost=i}}},function(t,e,o){"use strict";var i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)Object.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var r=i(o(2)),s=function(){function t(t,e,o){this.blockSize=40,this.drawmode=-1,this.algorithm="astar",this.options={diagonal:!1,smoothenPath:!1,heuristic:"manhattan",bidirectional:!1},this.rectangles=[],this.grid=t,this.start=this.grid.get(e.x,e.y),this.end=this.grid.get(o.x,o.y),this.paper=Raphael("grid-container",t.width*this.blockSize,t.height*this.blockSize),this.initSVG()}return t.prototype.findPath=function(){var t=this;this.clear(!0);var e=new r.AStar;"astar"===this.algorithm?e=new r.AStar({bidirectional:this.options.bidirectional,diagonal:this.options.diagonal,smoothenPath:this.options.smoothenPath,heuristic:this.options.heuristic}):"bfs"===this.algorithm?e=new r.BFS({diagonal:this.options.diagonal,heuristic:this.options.heuristic,bidirectional:this.options.bidirectional}):"dijkstra"===this.algorithm&&(e=new r.Dijkstra({diagonal:this.options.diagonal,smoothenPath:this.options.smoothenPath,bidirectional:this.options.bidirectional}));var o=e.findPath({x:this.start.x,y:this.start.y},{x:this.end.x,y:this.end.y},this.grid);console.log(o);var i="M";o.path.forEach((function(e){var o=e.x*t.blockSize+t.blockSize/2,r=e.y*t.blockSize+t.blockSize/2;i+=o+" "+r+"L"})),this.pathSVG&&this.pathSVG.remove(),this.pathSVG=this.paper.path(i),this.pathSVG.attr({"stroke-width":2,stroke:"purple"}),o.open.forEach((function(e){e.coord!==t.start.coord&&e.coord!==t.end.coord&&t.rectangles[e.y][e.x].attr("fill","orange")})),o.closed.forEach((function(e){e.coord!==t.start.coord&&e.coord!==t.end.coord&&t.rectangles[e.y][e.x].attr("fill","#ccbfb3")}))},t.prototype.initSVG=function(){var t=this;this.grid.matrix.forEach((function(e,o){var i=[];e.forEach((function(e,r){var s=t.paper.rect(r*t.blockSize,o*t.blockSize,t.blockSize,t.blockSize),n=r+":"+o,h=e?"gray":"beige";n==t.start.coord?h="green":n===t.end.coord&&(h="red"),s.attr({stroke:"white",strokeWidth:1,fill:h}),s.data({x:r,y:o,coord:n}),s.mousemove((function(){n!==t.start.coord&&n!==d.end.coord&&(0==t.drawmode&&"gray"===s.attr("fill")?(s.attr("fill","beige"),t.grid.setSolid(r,o,!1)):1==t.drawmode&&(s.attr("fill","gray"),t.grid.setSolid(r,o,!0)))})),s.mousedown((function(e){2!=e.button&&("gray"!==s.attr("fill")?t.drawmode=1:t.drawmode=0)})),s.click((function(e){2!=e.button&&n!==t.start.coord&&n!==d.end.coord&&("gray"!==s.attr("fill")?(s.attr("fill","gray"),t.grid.setSolid(r,o,!0)):(s.attr("fill","beige"),t.grid.setSolid(r,o,!1)),t.drawmode=-1)})),s.mouseup((function(){t.drawmode=-1})),i.push(s)})),t.rectangles.push(i)}))},t.prototype.clear=function(t){void 0===t&&(t=!1),this.pathSVG&&this.pathSVG.remove();for(var e=0;e<this.grid.height;e++)for(var o=0;o<this.grid.width;o++)o==this.start.x&&e==this.start.y||o==this.end.x&&e==this.end.y||t&&l.get(o,e).solid||(this.grid.setSolid(o,e,!1),this.rectangles[e][o].attr("fill","beige"))},t.prototype.random=function(){var t=this;this.pathSVG&&this.pathSVG.remove(),this.rectangles.forEach((function(e,o){e.forEach((function(e,i){i==t.start.x&&o==t.start.y||i==t.end.x&&o==t.end.y||(Math.random()>.75?(t.grid.setSolid(i,o,!0),e.attr("fill","gray")):(t.grid.setSolid(i,o,!1),e.attr("fill","beige")))}))}))},t}(),n=document.getElementById("grid-container"),h=Math.floor(n.clientWidth/40),a=Math.floor(n.clientHeight/40),l=new r.Grid(h,a),d=new s(l,{x:1,y:1},{x:h-2,y:a-2}),c=document.getElementById("start"),u=document.getElementById("random"),g=document.getElementById("clear"),p=document.getElementById("diagonal"),f=document.getElementById("smooth"),y=document.getElementById("bi");c.onclick=function(){return d.findPath()},u.onclick=function(){return d.random()},g.onclick=function(){return d.clear()},p.onclick=function(){d.options.diagonal=!d.options.diagonal,p.textContent="Diagonal: "+d.options.diagonal},f.onclick=function(){d.options.smoothenPath=!d.options.smoothenPath,f.textContent="Smooth: "+d.options.smoothenPath},y.onclick=function(){d.options.bidirectional=!d.options.bidirectional,y.textContent="Bi search: "+d.options.bidirectional},document.getElementById("algorithm").onchange=function(t){return d.algorithm=t.target.value},document.getElementById("heuristic").onchange=function(t){return d.options.heuristic=t.target.value}},function(t,e,o){"use strict";function i(t){for(var o in t)e.hasOwnProperty(o)||(e[o]=t[o])}Object.defineProperty(e,"__esModule",{value:!0}),i(o(3)),i(o(0)),i(o(4)),i(o(5)),i(o(6)),i(o(7))},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=o(0);e.Grid=class{constructor(t,e){this.matrix=[],this.map=[],this.width=t,this.height=e,this.matrix=new Array(e).fill(new Array(t).fill(0)),this.fill(this.matrix)}get(t,e){return this.map[e][t]}set(t,e,o){this.map[e][t]=o}setSolid(t,e,o){this.matrix[e][t]=Number(o),this.map[e][t].solid=o}fill(t){let e=0==this.map.length;for(let o=0;o<t.length;o++){e?this.map.push([]):this.map[o].length=0;for(let e=0;e<t[o].length;e++){let r=new i.Graph(e,o,Boolean(t[o][e]));this.map[o].push(r)}}}random(t=.7){return this.matrix.forEach((e,o)=>{e.forEach((e,i)=>{let r=Number(Math.random()>t);r?this.setSolid(i,o,!0):this.setSolid(i,o,!1),this.matrix[o][i]=r})}),this.matrix}}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.h=["manhattan","octile","eucledian","chebyshev"]},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.AStar=class{constructor(t={}){this.diagonalCost=1,this.diagonal=t.diagonal||!1,this.heuristic=t.heuristic||"manhattan",this.passDiagonal=t.passDiagonal||!1,this.bidirectional=t.bidirectional||!1,t.smoothenPath&&(this.diagonalCost=Math.SQRT2)}findPath(t,e,o){if(this.bidirectional)return this.findPathbs(t,e,o);let i=o.get(t.x,t.y),r=[i],s=[],n={},h={},a={},l=[],d=`${t.x}:${t.y}`,c=`${e.x}:${e.y}`;for(n[d]=0,h[d]=0;r.length>0;){if(s.push(i),i=r.pop(),i.coord===c){let e=[],n=[];for(;i.coord!=d;)e.push({x:i.x,y:i.y}),n.push(i),i=a[i.coord];e.push({x:t.x,y:t.y}),n.push(o.get(t.x,t.y)),e.reverse(),n.reverse();let h=e.length;return{path:e,nodes:n,open:r,closed:s,length:h}}l=this.getNeighbours(i,c,o),l.forEach((t,o)=>{let s=t[0],l=h[i.coord]+s.movementCost+(t[1]>3?this.diagonalCost-1:0);if(void 0===h[s.coord]||l<h[s.coord]){let t=this.hvalue(e,s);h[s.coord]=l,n[s.coord]=l+t,a[s.coord]=i,r.insertSorted(s,(t,e)=>n[e.coord]-n[t.coord])}})}return{path:[],nodes:[],open:r,closed:s,length:0}}findPathbs(t,e,o){let i=[o.get(t.x,t.y),o.get(e.x,e.y)],r=[[],[]],s=[],n=[{},{}],h=[{},{}],a=[{},{}],l=`${t.x}:${t.y}`,d=`${e.x}:${e.y}`,c=[[],[]];for(n[0][l]=0,n[1][d]=0,h[0][l]=0,h[1][d]=0,r=[[o.get(t.x,t.y)],[o.get(e.x,e.y)]];r[0].length>0&&r[1].length>0;){if(s.push(i[0],i[1]),i=[r[0].pop(),r[1].pop()],void 0!==a[0][i[1].coord]||void 0!==a[1][i[0].coord]){let t=Number(void 0!==a[0][i[1].coord]),e=[],n=[],h={x:i[t].x,y:i[t].y};for(;i[t];)e.push({x:i[t].x,y:i[t].y}),i[t]=a[1-t][i[t].coord];for(i[1-t]=o.get(h.x,h.y);i[1-t];)n.push({x:i[1-t].x,y:i[1-t].y}),i[1-t]=a[t][i[1-t].coord];e.reverse(),e.pop(),e.push(...n);let l=[];return l.push(...r[0]),l.push(...r[1]),{path:e,nodes:[],open:l,closed:s,length:0}}c=[this.getNeighbours(i[0],d,o),this.getNeighbours(i[1],l,o)],c.forEach((t,e)=>{t.forEach(t=>{let o=t[0],s=h[e][i[e].coord]+o.movementCost+(t[1]>3?this.diagonalCost-1:0);if(void 0===h[e][o.coord]||s<h[e][o.coord]){let t=this.hvalue(i[1-e],o);h[e][o.coord]=s,n[e][o.coord]=s+t+h[1-e][i[1-e].coord],a[e][o.coord]=i[e],r[e].insertSorted(o,(t,o)=>n[e][o.coord]-n[e][t.coord])}})})}let u=[];return u.push(...r[0]),u.push(...r[1]),{path:[],nodes:[],open:u,closed:s,length:0}}hvalue(t,e){let o=0;if("octile"==this.heuristic){let i=1,r=Math.SQRT2,s=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);o=i*(s+n)+(r-2*i)*Math.min(s,n)}else if("eucledian"==this.heuristic){let i=1,r=Math.abs(e.x-t.x),s=Math.abs(e.y-t.y);o=i*Math.sqrt(r*r+s*s)}else if("chebyshev"==this.heuristic){let i=1,r=1,s=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);o=i*(s+n)+(r-2*i)*Math.min(s,n)}else o=Math.abs(t.x-e.x)+Math.abs(t.y-e.y);return o}getNeighbours(t,e,o){let i=[],r=[[1,0],[0,1],[-1,0],[0,-1],[1,1],[1,-1],[-1,1],[-1,-1]];for(let s=0;s<(this.diagonal?8:4);s++){if(t.x+r[s][0]>o.width-1||t.x+r[s][0]<0)continue;if(t.y+r[s][1]>o.height-1||t.y+r[s][1]<0)continue;if(!this.passDiagonal&&s>3&&o.get(t.x+r[s][0],t.y).solid&&o.get(t.x,t.y+r[s][1]).solid)continue;let n=o.get(t.x+r[s][0],t.y+r[s][1]);n.solid&&n.coord!==e||i.push([n,s])}return i}},Array.prototype.insertSorted=function(t,e){if(this.length<1||e(t,this[this.length-1])>=0)return this.push(t),this;for(var o=this.length-2;o>=0;o--)if(e(t,this[o])>=0)return this.splice(o+1,0,t),this;return this.splice(0,0,t),this}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.BFS=class{constructor(t={}){this.diagonal=t.diagonal||!1,this.heuristic=t.heuristic||"manhattan",this.passDiagonal=t.passDiagonal||!1,this.bidirectional=t.bidirectional||!1}findPath(t,e,o){if(this.bidirectional)return this.findPathbs(t,e,o);let i=o.get(t.x,t.y),r=[i],s=[],n={},h={},a=[],l=`${t.x}:${t.y}`,d=`${e.x}:${e.y}`;for(h[l]=0;r.length>0;){if(s.push(i),i=r.pop(),i.coord===d){let e=[],h=[];for(;i.coord!=l;)e.push({x:i.x,y:i.y}),h.push(i),i=n[i.coord];e.push({x:t.x,y:t.y}),h.push(o.get(t.x,t.y)),e.reverse(),h.reverse();let a=e.length;return{path:e,nodes:h,open:r,closed:s,length:a}}a=this.getNeighbours(i,d,o),a.forEach((t,o)=>{let s=t[0],a=this.hvalue(e,s);(void 0===h[s.coord]||a<h[s.coord])&&(h[s.coord]=a,n[s.coord]=i,r.insertSorted(s,(t,e)=>h[e.coord]-h[t.coord]))})}return{path:[],nodes:[],open:r,closed:s,length:0}}findPathbs(t,e,o){let i=[o.get(t.x,t.y),o.get(e.x,e.y)],r=[[],[]],s=[],n=[{},{}],h=[{},{}],a=[[],[]],l=`${t.x}:${t.y}`,d=`${e.x}:${e.y}`;for(n[0][l]=0,n[1][d]=0,r=[[o.get(t.x,t.y)],[o.get(e.x,e.y)]];r[0].length>0&&r[1].length>0;){if(s.push(i[0],i[1]),i=[r[0].pop(),r[1].pop()],void 0!==h[0][i[1].coord]||void 0!==h[1][i[0].coord]){let t=Number(void 0!==h[0][i[1].coord]),e=[],n=[],a={x:i[t].x,y:i[t].y};for(;i[t];)e.push({x:i[t].x,y:i[t].y}),i[t]=h[1-t][i[t].coord];for(i[1-t]=o.get(a.x,a.y);i[1-t];)n.push({x:i[1-t].x,y:i[1-t].y}),i[1-t]=h[t][i[1-t].coord];e.reverse(),e.push(...n);let l=[];return l.push(...r[0]),l.push(...r[1]),{path:e,nodes:[],open:l,closed:s,length:0}}a=[this.getNeighbours(i[0],d,o),this.getNeighbours(i[1],l,o)],a.forEach((o,s)=>{o.forEach(o=>{let a=o[0],l=this.hvalue(0==s?e:t,a);(void 0===n[s][a.coord]||l<n[s][a.coord])&&(n[s][a.coord]=l,h[s][a.coord]=i[s],r[s].insertSorted(a,(t,e)=>n[s][e.coord]-n[s][t.coord]))})})}let c=[];return c.push(...r[0]),c.push(...r[1]),{path:[],nodes:[],open:c,closed:s,length:0}}hvalue(t,e){let o=0;if("octile"==this.heuristic){let i=1,r=Math.SQRT2,s=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);o=i*(s+n)+(r-2*i)*Math.min(s,n)}else if("eucledian"==this.heuristic){let i=1,r=Math.abs(e.x-t.x),s=Math.abs(e.y-t.y);o=i*Math.sqrt(r*r+s*s)}else if("chebyshev"==this.heuristic){let i=1,r=1,s=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);o=i*(s+n)+(r-2*i)*Math.min(s,n)}else o=Math.abs(t.x-e.x)+Math.abs(t.y-e.y);return o}getNeighbours(t,e,o){let i=[],r=[[1,0],[0,1],[-1,0],[0,-1],[1,1],[1,-1],[-1,1],[-1,-1]];for(let s=0;s<(this.diagonal?8:4);s++){if(t.x+r[s][0]>o.width-1||t.x+r[s][0]<0)continue;if(t.y+r[s][1]>o.height-1||t.y+r[s][1]<0)continue;if(!this.passDiagonal&&s>3&&o.get(t.x+r[s][0],t.y).solid&&o.get(t.x,t.y+r[s][1]).solid)continue;let n=o.get(t.x+r[s][0],t.y+r[s][1]);n.solid&&n.coord!==e||i.push([n,s])}return i}},Array.prototype.insertSorted=function(t,e){if(this.length<1||e(t,this[this.length-1])>=0)return this.push(t),this;for(var o=this.length-2;o>=0;o--)if(e(t,this[o])>=0)return this.splice(o+1,0,t),this;return this.splice(0,0,t),this}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Dijkstra=class{constructor(t={}){this.diagonalCost=1,this.diagonal=t.diagonal||!1,this.passDiagonal=t.passDiagonal||!1,t.smoothenPath&&(this.diagonalCost=Math.SQRT2),this.bidirectional=t.bidirectional||!1}findPath(t,e,o){if(this.bidirectional)return this.findPathbs(t,e,o);let i=o.get(t.x,t.y),r=[i],s=[],n={},h={},a=[],l=`${t.x}:${t.y}`,d=`${e.x}:${e.y}`;for(h[l]=0;r.length>0;){if(s.push(i),i=r.pop(),i.coord===d){let e=[],h=[];for(;i.coord!=l;)e.push({x:i.x,y:i.y}),h.push(i),i=n[i.coord];e.push({x:t.x,y:t.y}),h.push(o.get(t.x,t.y)),e.reverse(),h.reverse();let a=e.length;return{path:e,nodes:h,open:r,closed:s,length:a}}a=this.getNeighbours(i,d,o),a.forEach(t=>{let e=t[0],o=h[i.coord]+e.movementCost+(t[1]>3?this.diagonalCost-1:0);(void 0===h[e.coord]||o<h[e.coord])&&(h[e.coord]=o,n[e.coord]=i,r.insertSorted(e,(t,e)=>h[e.coord]-h[t.coord]))})}return{path:[],nodes:[],open:r,closed:s,length:0}}findPathbs(t,e,o){let i=[o.get(t.x,t.y),o.get(e.x,e.y)],r=[[],[]],s=[],n=[{},{}],h=[{},{}],a=[[],[]],l=`${t.x}:${t.y}`,d=`${e.x}:${e.y}`;for(n[0][l]=0,n[1][d]=0,r=[[o.get(t.x,t.y)],[o.get(e.x,e.y)]];r[0].length>0&&r[1].length>0;){if(s.push(i[0],i[1]),i=[r[0].pop(),r[1].pop()],void 0!==h[0][i[1].coord]||void 0!==h[1][i[0].coord]){let t=Number(void 0!==h[0][i[1].coord]),e=[],n=[],a={x:i[t].x,y:i[t].y};for(;i[t];)e.push({x:i[t].x,y:i[t].y}),i[t]=h[1-t][i[t].coord];for(i[1-t]=o.get(a.x,a.y);i[1-t];)n.push({x:i[1-t].x,y:i[1-t].y}),i[1-t]=h[t][i[1-t].coord];e.reverse(),e.push(...n);let l=[];return l.push(...r[0]),l.push(...r[1]),{path:e,nodes:[],open:l,closed:s,length:0}}a=[this.getNeighbours(i[0],d,o),this.getNeighbours(i[1],l,o)],a.forEach((t,e)=>{t.forEach(t=>{let o=t[0],s=n[e][i[e].coord]+o.movementCost+(t[1]>3?this.diagonalCost-1:0);(void 0===n[e][o.coord]||s<n[e][o.coord])&&(n[e][o.coord]=s,h[e][o.coord]=i[e],r[e].insertSorted(o,(t,o)=>n[e][o.coord]-n[e][t.coord]))})})}let c=[];return c.push(...r[0]),c.push(...r[1]),{path:[],nodes:[],open:c,closed:s,length:0}}getNeighbours(t,e,o){let i=[],r=[[1,0],[0,1],[-1,0],[0,-1],[1,1],[1,-1],[-1,1],[-1,-1]];for(let s=0;s<(this.diagonal?8:4);s++){if(t.x+r[s][0]>o.width-1||t.x+r[s][0]<0)continue;if(t.y+r[s][1]>o.height-1||t.y+r[s][1]<0)continue;if(!this.passDiagonal&&s>3&&o.get(t.x+r[s][0],t.y).solid&&o.get(t.x,t.y+r[s][1]).solid)continue;let n=o.get(t.x+r[s][0],t.y+r[s][1]);n.solid&&n.coord!==e||i.push([n,s])}return i}},Array.prototype.insertSorted=function(t,e){if(this.length<1||e(t,this[this.length-1])>=0)return this.push(t),this;for(var o=this.length-2;o>=0;o--)if(e(t,this[o])>=0)return this.splice(o+1,0,t),this;return this.splice(0,0,t),this}}]);